<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>gfs Template Target</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body id="gfstemplate" class="book toc2 toc-left">
<div id="header">
<h1>gfs Template Target</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of contents</div>
<ul class="sectlevel1">
<li><a href="#gfstemplate_overview">1. Overview</a></li>
<li><a href="#gfstemplate_testing">2. Testing gfs files</a></li>
<li><a href="#gfstemplate_schemaconversionrules">3. Schema Conversion Rules</a>
<ul class="sectlevel2">
<li><a href="#gfstemplate_schemaconversionrules_documentation">3.1. Documentation</a></li>
<li><a href="#gfstemplate_schemaconversionrules_schemapackage">3.2. Schema Packages</a></li>
<li><a href="#gfstemplate_schemaconversionrules_types">3.3. Types</a>
<ul class="sectlevel3">
<li><a href="#gfstemplate_schemaconversionrules_types_mappings">3.3.1. Mappings</a></li>
<li><a href="#gfstemplate_schemaconversionrules_types_abstractness">3.3.2. Abstractness</a></li>
<li><a href="#gfstemplate_schemaconversionrules_types_inheritance">3.3.3. Inheritance</a></li>
<li><a href="#gfstemplate_schemaconversionrules_types_featureandobjecttype">3.3.4. Feature and Object Type</a></li>
<li><a href="#gfstemplate_schemaconversionrules_types_mixin">3.3.5. Mixin Type</a></li>
<li><a href="#gfstemplate_schemaconversionrules_types_datatype">3.3.6. Data Type</a></li>
<li><a href="#gfstemplate_schemaconversionrules_types_union">3.3.7. Union</a></li>
<li><a href="#gfstemplate_schemaconversionrules_types_enumeration">3.3.8. Enumeration</a></li>
<li><a href="#gfstemplate_schemaconversionrules_types_codelist">3.3.9. Code List</a></li>
<li><a href="#gfstemplate_schemaconversionrules_types_basictype">3.3.10. Basic Type</a></li>
</ul>
</li>
<li><a href="#gfstemplate_schemaconversionrules_properties">3.4. Properties</a>
<ul class="sectlevel3">
<li><a href="#gfstemplate_schemaconversionrules_properties_general">3.4.1. General considerations</a></li>
<li><a href="#gfstemplate_schemaconversionrules_properties_name">3.4.2. Name</a></li>
<li><a href="#gfstemplate_schemaconversionrules_properties_elementpath">3.4.3. Element Path</a></li>
<li><a href="#gfstemplate_schemaconversionrules_properties_propertytype">3.4.4. Property Type</a></li>
<li><a href="#gfstemplate_schemaconversionrules_properties_nullable">3.4.5. Nullable</a></li>
<li><a href="#gfstemplate_schemaconversionrules_properties_readonly">3.4.6. readOnly</a></li>
<li><a href="#gfstemplate_schemaconversionrules_properties_initialvalue">3.4.7. Initial Value</a></li>
</ul>
</li>
<li><a href="#gfstemplate_schemaconversionrules_associationclass">3.5. Association Class</a></li>
<li><a href="#gfstemplate_schemaconversionrules_constraint">3.6. Constraints</a></li>
<li><a href="#gfstemplate_schemaconversionrules_additionalrules">3.7. Additional rules</a></li>
</ul>
</li>
<li><a href="#gfstemplate_encodingrules">4. Encoding Rules</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>(available since ShapeChange v2.14.0)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gfstemplate_overview"><a class="anchor" href="#gfstemplate_overview"></a>1. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This target generates gfs template files for application schemas. The files can be used for loading GML data with the <a href="https://gdal.org/drivers/vector/gml.html">GDAL GML driver</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
gfs templates define relevant structures of GML data. The XML encoding of the GML data is defined by a GML application schema, i.e., an XML Schema. That XML Schema has been created from a conceptual model - either in its original form, or in a transformed version. ShapeChange, for example, supports multiple model transformations which may be applied before creating an XML Schema using the XmlSchema target. The gfs target should be supplied with the same UML model that was used for the production of the XML Schema, in order for the UML model elements to match the XML elements as much as possible.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Creating gfs (template) files can be useful, for the following reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mapping of GML data is more consistent, and can be more precise, with pre-defined gfs files. If the GDAL GML driver does not find a gfs file which corresponds to a given GML file, then the driver creates his own mapping (and gfs file), purely based upon the content of that GML file. However, additional domain knowledge can lead to a different type-assignment for property definitions, including assignments for width and precision, and may also be more specific about the mapping of XML attributes (e.g. @uom).</p>
</li>
<li>
<p>Certain feature data can be suppressed, for example complex metadata, by not encoding according feature properties.</p>
</li>
<li>
<p>The GDAL GML driver may not be able to parse all kinds of XML Schema that accompany the GML data. The GML driver documentation (as of 2022-11-28) states several times that parsing of the XSD may fail, and therefore is not guaranteed to succeed. Exact reasons why that may not be the case have not been documented. Trivial reasons could be non-well-formed XSD, invalid XSD, unsupported XML encodings, or network issues when resolving imported or included XSD files.</p>
</li>
<li>
<p>The <a href="https://gdal.org/drivers/vector/gml.html#schema">documentation of the GDAL GML driver</a> states the following: <em>"You can use [the] GML_GFS_TEMPLATE configuration option (or GFS_TEMPLATE open option) set to a path_to_template.gfs in order to unconditionally use a predefined GFS file. This option is really useful when you are planning to import many distinct GML files in subsequent steps [-append] and you absolutely want to preserve a fully consistent data layout for the whole GML set."</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Due to the nature of the GDAL GML driver, there are <strong>limitations</strong> regarding which application schema structures can meaningfully be converted to gfs structures. The main reason is that the GML driver only supports reading GML data that complies to a structure supported by the <a href="https://portal.ogc.org/files/?artifact_id=42729">GML simple features profile</a>. For reading GML data, the GML driver documentation is not specific about a certain compliance level. For writing, GML simple features profile compliance level SF-0 and - in particular cases (see the <a href="https://gdal.org/drivers/vector/gml.html#dataset-creation-options">GML driver documentation of 'dataset creation options'</a>) - SF-1 - is supported. For reading, a subset of GML simple features profile compliance level SF-1 is supported. More specifically: compliance level SF-0 is supported, as well as cardinalities greater than 1. An additional feature of GDAL is that features can even be encoded within other features (i.e., inline). However, reading of user defined types with complex content is limited.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <a href="https://gdal.org/drivers/vector/gmlas.html#vector-gmlas">GDAL GMLAS driver</a> supports more complex schemas. Since this ShapeChange target is concerned with creating gfs template files to be used in conjunction with the GDAL GML driver, the GMLAS driver is not discussed in further detail here. The interested reader is referred to the documentation of the GMLAS driver.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following limitations apply for schemas processed by this target:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Association classes are not supported.</p>
</li>
<li>
<p>Complex data types and unions are only supported to a limited extent.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gfstemplate_testing"><a class="anchor" href="#gfstemplate_testing"></a>2. Testing gfs files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A gfs template file produced by this target can be tested with GML data as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open a command line, where the command <code>ogrinfo</code> is available (for example, open the OSGeo4W Shell).</p>
<div class="ulist">
<ul>
<li>
<p>The documentation of <code>ogrinfo</code> is available at <a href="https://gdal.org/programs/ogrinfo.html" class="bare">https://gdal.org/programs/ogrinfo.html</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>In the command line, navigate to the directory in which the test instance and the gfs file are located.</p>
<div class="ulist">
<ul>
<li>
<p>It actually works to have the gfs file in a different directory. In that case, provide an absolute or relative path to the gfs file in the command.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Execute the following command: <code>ogrinfo -ro -al -oo WRITE_GFS=NO -oo GFS_TEMPLATE={gfs file} {GML file}</code></p>
<div class="ulist">
<ul>
<li>
<p>Example: <code>ogrinfo -ro -al -oo WRITE_GFS=NO -oo GFS_TEMPLATE=test.gfs data.gml</code></p>
</li>
<li>
<p>The GML file may have .gml or .xml as file extension.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The GML data must have at least one wrapper element around the feature elements. The GDAL GML driver appears to reject files that contain only a single feature as-is, i.e., encoded as the root of the document. That wrapper can be a FeatureCollection element, but also any other XML element.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The features contained in the GML data should have a value for XML attribute <code>gml:id</code>. Otherwise, the GML driver will not be able to assign a value for field gml_id.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gfstemplate_schemaconversionrules"><a class="anchor" href="#gfstemplate_schemaconversionrules"></a>3. Schema Conversion Rules</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following subsections describe a number of conversion rules, which define how the contents of application schemas are converted to gfs template files.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
An encoding rule consists of a set of conversion rules – as required by a community. The <a href="#gfstemplate_encodingrules">Encoding Rules</a> section describes how encoding rules can be defined.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="gfstemplate_schemaconversionrules_documentation"><a class="anchor" href="#gfstemplate_schemaconversionrules_documentation"></a>3.1. Documentation</h3>
<div class="paragraph">
<p>Descriptive information of model elements is irrelevant in gfs templates. Therefore, no rule is defined to convert model element documentation.</p>
</div>
</div>
<div class="sect2">
<h3 id="gfstemplate_schemaconversionrules_schemapackage"><a class="anchor" href="#gfstemplate_schemaconversionrules_schemapackage"></a>3.2. Schema Packages</h3>
<div class="paragraph">
<p>Schema packages have the stereotype «applicationSchema», «schema», or an alias (e.g. using a specific language, like «anwendungsschema»). An «applicationSchema» package represents an application schema according to ISO 19109. The stereotype «schema» has been introduced for packages that should be treated like application schemas, but do not contain feature types. Such schemas are compliant to ISO 19103; examples are ISO 191xx schemas.</p>
</div>
<div class="paragraph">
<p>The gfs template target is a normal "ShapeChange Target". It converts all <a href="../targets/Output_Targets.html#Selecting_the_Schemas_to_Process">schemas selected for processing</a> separately, rather than handling all of them in one go. The target creates one gfs template file per schema. The name of a template file is the schema name, in all lower case, and non-word characters replaced by '\_'. The target also creates a registry file with a namespace entry for the processed schemas. The namespace uri value is the value of the target namespace assigned to the schema, typically via tagged value <em>targetNamespace</em> on the schema package. The name of the registry file is <code>{base name of the gfs file}_gml_registry.xml</code>. The content of that registry file can be added to the gml_registry file used by the application, such as GDAL (for further details, see <a href="https://gdal.org/drivers/vector/gml.html#registry-for-gml-application-schemas" class="bare">https://gdal.org/drivers/vector/gml.html#registry-for-gml-application-schemas</a>) and QGIS.</p>
</div>
<div class="paragraph">
<p>The gfs template file has root element <code>&lt;GMLFeatureClassList&gt;</code>. The child element <code>&lt;SequentialLayers&gt;</code> is not encoded, meaning that the default value 'false' for this element applies. Child elements <code>&lt;GMLFeatureClass&gt;</code> will be added to the root element, as defined in section <a href="#gfstemplate_schemaconversionrules_types_featureandobjecttype">Feature and Object Type</a>. The feature classes are sorted by their <code>&lt;Name&gt;</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The XML declaration is omitted in the gfs template file on purpose. Otherwise, the GML driver appears to not recognize the file correctly as gfs file. Note that the encoding of the file is UTF-8.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
With extra information about the encoding of GML data for a particular schema, that the features belonging to different feature types are <span class="underline">always</span> encoded in the order of <code>&lt;GMLFeatureClass&gt;</code> elements defined by the gfs file, <code>&lt;SequentialLayers&gt;</code> could be set to 'true'. For further details about that element, see the <a href="https://gdal.org/drivers/vector/gml.html#performance-issues-with-large-multi-layer-gml-files">GDAL GML driver documentation</a>. Setting <code>&lt;SequentialLayers&gt;</code> could be achieved with an additional target parameter. However, choosing the default value is the safest approach to start with. Furthermore, for particular setups, where layers are encoded sequentially, the gfs templates can also be edited manually to add SequentialLayers = true.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="gfstemplate_schemaconversionrules_types"><a class="anchor" href="#gfstemplate_schemaconversionrules_types"></a>3.3. Types</h3>
<div class="sect3">
<h4 id="gfstemplate_schemaconversionrules_types_mappings"><a class="anchor" href="#gfstemplate_schemaconversionrules_types_mappings"></a>3.3.1. Mappings</h4>
<div class="paragraph">
<p>The gfs template target uses map entries - defined in the target configuration - to map UML types to the types supported in the gfs format for the <code>&lt;Type&gt;</code> child element of <code>&lt;PropertyDefn&gt;</code> and <code>&lt;GeomPropertyDefn&gt;</code> elements.</p>
</div>
<div class="paragraph">
<p>A map entry for the gfs template target has the following structure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>@type (required): The unqualified UML type/class name to be mapped. Should be unique within the model (if it is not unique, this can lead to unexpected results).</p>
</li>
<li>
<p>@rule (required): The encoding rule to which this mapping applies. May be "*" to indicate that the mapping applies to all encoding rules.</p>
</li>
<li>
<p>@targetType (required):</p>
<div class="ulist">
<ul>
<li>
<p>Target type values that will result in the creation of a <code>&lt;PropertyDefn&gt;</code>:</p>
<div class="ulist">
<ul>
<li>
<p>String,</p>
</li>
<li>
<p>Integer,</p>
</li>
<li>
<p>Real,</p>
</li>
<li>
<p>FeatureProperty</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: Internally, the GML driver appears to map FeatureProperty to String. However, the behavior for reading data is different, if FeatureProperty is used as type and the property value is an inline encoded feature. In that case, the GML driver adds the inline object to the appropriate layer (if one is defined in the gfs file). If String was used as property type in that case, the inline encoded feature would be ignored. In addition to enabling the recognition of inline encoded features, FeatureProperty is also useful to highlight properties whose conceptual value type is a feature type.</p>
</li>
</ul>
</div>
</li>
<li>
<p>NOTE: The *List types (e.g., StringList) are automatically determined by the target, based upon the maximum multiplicity determined for a property definition.</p>
</li>
<li>
<p>NOTE: If @targetType is different to these values (i.e., String, Integer, Real, and FeatureProperty) then the gfs template target assumes that the mapping target is one of the geometry types supported by the gfs format.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Target type values that will result in the creation of a <code>&lt;GeomPropertyDefn&gt;</code>:</p>
<div class="ulist">
<ul>
<li>
<p>a string matching the following regular expression: <code>((Multi)?(Point|LineString|Polygon|Curve|Surface)|GeometryCollection|CircularString|CurvePolygon|Triangle|PolyhedralSurface|TIN)Z?M?</code> - Example: MultiPointZ</p>
</li>
<li>
<p>or one of the OGRwkbGeometryType enumeration values (i.e., the integer values); at the time of writing this documentation - 16th of November, 2022 - these are:</p>
<div class="ulist">
<ul>
<li>
<p>wkbUnknown = 0</p>
</li>
<li>
<p>wkbPoint = 1</p>
</li>
<li>
<p>wkbLineString = 2</p>
</li>
<li>
<p>wkbPolygon = 3</p>
</li>
<li>
<p>wkbMultiPoint = 4</p>
</li>
<li>
<p>wkbMultiLineString = 5</p>
</li>
<li>
<p>wkbMultiPolygon = 6</p>
</li>
<li>
<p>wkbGeometryCollection = 7</p>
</li>
<li>
<p>wkbCircularString = 8</p>
</li>
<li>
<p>wkbCompoundCurve = 9</p>
</li>
<li>
<p>wkbCurvePolygon = 10</p>
</li>
<li>
<p>wkbMultiCurve = 11</p>
</li>
<li>
<p>wkbMultiSurface = 12</p>
</li>
<li>
<p>wkbCurve = 13</p>
</li>
<li>
<p>wkbSurface = 14</p>
</li>
<li>
<p>wkbPolyhedralSurface = 15</p>
</li>
<li>
<p>wkbTIN = 16</p>
</li>
<li>
<p>wkbTriangle = 17</p>
</li>
<li>
<p>wkbNone = 100</p>
</li>
<li>
<p>wkbLinearRing = 101</p>
</li>
<li>
<p>wkbCircularStringZ = 1008</p>
</li>
<li>
<p>wkbCompoundCurveZ = 1009</p>
</li>
<li>
<p>wkbCurvePolygonZ = 1010</p>
</li>
<li>
<p>wkbMultiCurveZ = 1011</p>
</li>
<li>
<p>wkbMultiSurfaceZ = 1012</p>
</li>
<li>
<p>wkbCurveZ = 1013</p>
</li>
<li>
<p>wkbSurfaceZ = 1014</p>
</li>
<li>
<p>wkbPolyhedralSurfaceZ = 1015</p>
</li>
<li>
<p>wkbTINZ = 1016</p>
</li>
<li>
<p>wkbTriangleZ = 1017</p>
</li>
<li>
<p>wkbPointM = 2001</p>
</li>
<li>
<p>wkbLineStringM = 2002</p>
</li>
<li>
<p>wkbPolygonM = 2003</p>
</li>
<li>
<p>wkbMultiPointM = 2004</p>
</li>
<li>
<p>wkbMultiLineStringM = 2005</p>
</li>
<li>
<p>wkbMultiPolygonM = 2006</p>
</li>
<li>
<p>wkbGeometryCollectionM = 2007</p>
</li>
<li>
<p>wkbCircularStringM = 2008</p>
</li>
<li>
<p>wkbCompoundCurveM = 2009</p>
</li>
<li>
<p>wkbCurvePolygonM = 2010</p>
</li>
<li>
<p>wkbMultiCurveM = 2011</p>
</li>
<li>
<p>wkbMultiSurfaceM = 2012</p>
</li>
<li>
<p>wkbCurveM = 2013</p>
</li>
<li>
<p>wkbSurfaceM = 2014</p>
</li>
<li>
<p>wkbPolyhedralSurfaceM = 2015</p>
</li>
<li>
<p>wkbTINM = 2016</p>
</li>
<li>
<p>wkbTriangleM = 2017</p>
</li>
<li>
<p>wkbPointZM = 3001</p>
</li>
<li>
<p>wkbLineStringZM = 3002</p>
</li>
<li>
<p>wkbPolygonZM = 3003</p>
</li>
<li>
<p>wkbMultiPointZM = 3004</p>
</li>
<li>
<p>wkbMultiLineStringZM = 3005</p>
</li>
<li>
<p>wkbMultiPolygonZM = 3006</p>
</li>
<li>
<p>wkbGeometryCollectionZM = 3007</p>
</li>
<li>
<p>wkbCircularStringZM = 3008</p>
</li>
<li>
<p>wkbCompoundCurveZM = 3009</p>
</li>
<li>
<p>wkbCurvePolygonZM = 3010</p>
</li>
<li>
<p>wkbMultiCurveZM = 3011</p>
</li>
<li>
<p>wkbMultiSurfaceZM = 3012</p>
</li>
<li>
<p>wkbCurveZM = 3013</p>
</li>
<li>
<p>wkbSurfaceZM = 3014</p>
</li>
<li>
<p>wkbPolyhedralSurfaceZM = 3015</p>
</li>
<li>
<p>wkbTINZM = 3016</p>
</li>
<li>
<p>wkbTriangleZM = 3017</p>
</li>
<li>
<p>wkbPoint25D = -2147483647</p>
</li>
<li>
<p>wkbLineString25D = -2147483646</p>
</li>
<li>
<p>wkbPolygon25D = -2147483645</p>
</li>
<li>
<p>wkbMultiPoint25D = -2147483644</p>
</li>
<li>
<p>wkbMultiLineString25D = -2147483643</p>
</li>
<li>
<p>wkbMultiPolygon25D = -2147483642</p>
</li>
<li>
<p>wkbGeometryCollection25D = -2147483641</p>
</li>
</ul>
</div>
</li>
<li>
<p>NOTE: Care needs to be taken when mapping a geometry type to one of the values from OGRwkbGeometryType. The implementation technologies / applications with which the gfs template is intended to be used needs to recognize the OGRwkbGeometryType values used as mapping target. For example, mapping GM_Curve to Curve (or one of its OGR variations for Z and M), and likewise mapping GM_Surface to Surface (or one of its Z/M variations) does not work in QGIS, since these OGRwkbGeometryType values are mapped to QGIS geometry type <em>unknown</em> (for details, see the <a href="https://github.com/qgis/QGIS/blob/389a8edc721693baa8070fbce8b8488fcc7a7e8c/src/core/providers/ogr/qgsogrproviderutils.cpp#L1935">source code of the OGR provider in QGIS</a>). As of 2023-01-06, the same is true for OGR geometry types 101 (LinearRing) and PolyhedralSurface.</p>
</li>
<li>
<p>NOTE: The gfs template target checks that the @targetType value either matches the regular expression given above, or is an integer value. However, the target does not check for specific integer values. That is because these integer values may change - although this should rarely occur - with new GDAL versions. That may also be seen as a warning: it may be more safe / future-proof to use one of the named geometry options as value of @targetType, rather than one of the integer values.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>@param (optional): Defines one or more parameters for the mapping. If no parameter is provided (leaving the 'param' attribute empty) then the map entry contains a straightforward mapping. Each parameter has a name. A list of parameters is separated by commas. Each parameter can also have characteristics defined for it, providing even further information for the conversion. Characteristics for a parameter are provided within curly braces. A characteristic usually is provided by a key-value pair, with the key being the identification of the characteristic.</p>
<div class="ulist">
<ul>
<li>
<p>Parameter <em>typeDetails</em>: Defines further details for the encoding of UML properties whose value type is mapped by the map entry.</p>
<div class="ulist">
<ul>
<li>
<p>Characteristic: <em>subtype</em> (optional): Specifies the subtype. The following combinations are allowed:</p>
<div class="ulist">
<ul>
<li>
<p>targetType: Integer - subtype: Short, Integer64</p>
</li>
<li>
<p>targetType: Real - subtype: Float</p>
</li>
<li>
<p>targetType: String - subtype: Boolean, Date, Time, Datetime</p>
</li>
<li>
<p>NOTE: If a particular property definition uses the *List type (which, as noted before, is automatically determined by the gfs template target), then particular gfs subtypes may not be allowed. Only the combinations IntegerList/Integer64 and StringList/Boolean are supported by the GML driver. If a particular subtype assignment is not allowed, due to the target applying a *List type, the target will ignore the subtype.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Characteristic: <em>gmlMeasureType</em> (optional): If true, this signifies that the type is represented in GML data using the gml:MeasureType, and thus the XML representation has the (optional) @uom attribute.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The GDAL GML driver may ignore a property value that cannot be parsed with the subtype defined for that property. For example, if subtype=Datetime, then the value '2012-01-10T17:23:00Z' is parsed, while a value '20.6' is ignored. That is important for XML elements that have a union of simple types, like in this example dateTime and decimal. That means that if a subtype is defined for a gfs property definition, then the GML data should always use a value which complies with that subtype. Variable simple content for a specific XML element is an issue, if a gfs subtype is defined for a property that addresses that XML element in its <code>&lt;ElementPath&gt;</code>. If in doubt, omit the subtype definition, and just use the general type in the property definition.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Except for XML elements that represent geometries or features, the GDAL GML driver does not support complex XML structures as property values. Thus, parsing complex GML elements like gml:TimeInstant and gml:TimePeriod is not directly supported. The gfs template target would need to be extended, with information about which property definitions to produce for certain GML elements (e.g. two property definitions for the begin and end of a gml:TimePeriod). That is future work. The necessary information could be added via an element in the advanced process configuration.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="gfstemplate_schemaconversionrules_types_abstractness"><a class="anchor" href="#gfstemplate_schemaconversionrules_types_abstractness"></a>3.3.2. Abstractness</h4>
<div class="paragraph">
<p>Abstract types themselves are not converted to <code>&lt;GMLFeatureClass&gt;</code> elements. However, their properties are encoded in non-abstract subtypes.</p>
</div>
</div>
<div class="sect3">
<h4 id="gfstemplate_schemaconversionrules_types_inheritance"><a class="anchor" href="#gfstemplate_schemaconversionrules_types_inheritance"></a>3.3.3. Inheritance</h4>
<div class="paragraph">
<p>When a type, which is subtype of one or more supertypes, is converted, property definitions are created as defined by the gfs encoding rules that apply to these supertypes and their properties.</p>
</div>
</div>
<div class="sect3">
<h4 id="gfstemplate_schemaconversionrules_types_featureandobjecttype"><a class="anchor" href="#gfstemplate_schemaconversionrules_types_featureandobjecttype"></a>3.3.4. Feature and Object Type</h4>
<div class="paragraph">
<p>In the conceptual model, feature and object types represent objects that have identity. That differentiates these types from, for example, data types. Other than that, feature and object types - in the following summarily called types with identity - are encoded as <code>&lt;GMLFeatureClass&gt;</code> elements.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
A feature type typically has stereotype «featuretype», while an object type has stereotype «type», «interface», or no stereotype.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If a map entry is defined for the type, it is not encoded in the provider configuration.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The name of the UML type is set as value of the <code>&lt;Name&gt;</code> child of the <code>&lt;GMLFeatureClass&gt;</code> element, and also for the <code>&lt;ElementPath&gt;</code> child element.</p>
</div>
<div class="paragraph">
<p>If target parameter <em>srsName</em> has a value, it is set as value of the <code>&lt;SRSName&gt;</code> child element.</p>
</div>
<div class="paragraph">
<p>If a <code>&lt;GMLFeatureClass&gt;</code> is encoded without any <code>&lt;GeomPropertyDefn&gt;</code>, then <code>&lt;GeometryType&gt;None&lt;/GeometryType&gt;</code> is added to that <code>&lt;GMLFeatureClass&gt;</code>, indicating that the class represents a feature without geometry.</p>
</div>
<div class="paragraph">
<p><code>&lt;GeomPropertyDefn&gt;</code> and <code>&lt;PropertyDefn&gt;</code> child elements are added for the UML properties of the type with identity, as described in the <a href="#gfstemplate_schemaconversionrules_properties">Properties</a> section. If target parameter <em>sortPropertiesByName</em> is set to 'true' (case is ignored; default value is 'false'), then the property definition elements are sorted by their <code>&lt;Name&gt;</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="gfstemplate_schemaconversionrules_types_mixin"><a class="anchor" href="#gfstemplate_schemaconversionrules_types_mixin"></a>3.3.5. Mixin Type</h4>
<div class="paragraph">
<p>Mixin types are treated like <a href="#gfstemplate_schemaconversionrules_types_abstractness">abstract types</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
ShapeChange supports the notion of mixin type (for further details, see <a href="../targets/xml schema/Support_for_Mixin_Classes.html">Support for Mixin Classes</a>). They are primarily used by the XML Schema target and were meant to support multiple inheritance in an encoding for an implementation technology that does not support multiple inheritance - such as XML Schema.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="gfstemplate_schemaconversionrules_types_datatype"><a class="anchor" href="#gfstemplate_schemaconversionrules_types_datatype"></a>3.3.6. Data Type</h4>
<div class="paragraph">
<p>A «dataType» is not converted to a <code>&lt;GMLFeatureClass&gt;</code> element. Instead, the type definition for the data type is evaluated whenever a property, whose value type is the data type, is encoded.</p>
</div>
</div>
<div class="sect3">
<h4 id="gfstemplate_schemaconversionrules_types_union"><a class="anchor" href="#gfstemplate_schemaconversionrules_types_union"></a>3.3.7. Union</h4>
<div class="paragraph">
<p>A «union» is not converted to a <code>&lt;GMLFeatureClass&gt;</code> element. Instead, the type definition for the union is evaluated whenever a property, whose value type is the union, is encoded.</p>
</div>
</div>
<div class="sect3">
<h4 id="gfstemplate_schemaconversionrules_types_enumeration"><a class="anchor" href="#gfstemplate_schemaconversionrules_types_enumeration"></a>3.3.8. Enumeration</h4>
<div class="paragraph">
<p>Enumerations themselves are not converted. The encoding of UML attributes that have an enumeration as value type shall use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: String</p>
</li>
<li>
<p>ElementPath: the name of the attribute</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="gfstemplate_schemaconversionrules_types_codelist"><a class="anchor" href="#gfstemplate_schemaconversionrules_types_codelist"></a>3.3.9. Code List</h4>
<div class="paragraph">
<p>Code lists themselves are not converted. The encoding of UML attributes that have a code list as value type type shall use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: String</p>
</li>
<li>
<p>ElementPath: If target parameter <em>gmlCodeListEncodingVersion</em> is:</p>
<div class="ulist">
<ul>
<li>
<p>not set, or "3.2", then the element path is the name of the attribute</p>
</li>
<li>
<p>"3.3", and tagged value <em>asDictionary</em> on the code list is:</p>
<div class="ulist">
<ul>
<li>
<p>equal to, ignoring case, "false", then the element path is the name of the attribute</p>
</li>
<li>
<p>not set, or equal to, ignoring case, "true", then the element path is: <code>{name of the attribute}@href</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In case of <em>gmlCodeListEncodingVersion</em> = 3.3 and tagged value <em>asDictionary</em> = true on the code list, no "_href" suffix is added to the element name. That is done on purpose, because the xlink:href value in that case constitutes the actual code value, and does not represent an association to another feature object, as would be expected by the <a href="https://gdal.org/drivers/vector/gml.html#building-junction-tables">GDAL script for building junction tables</a>, which looks for fields that have the "_href" suffix.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="gfstemplate_schemaconversionrules_types_basictype"><a class="anchor" href="#gfstemplate_schemaconversionrules_types_basictype"></a>3.3.10. Basic Type</h4>
<div class="paragraph">
<p>The gfs template target does not support the conversion of basic types.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If a direct or indirect supertype of an application schema class is mapped to one of the gfs property types <em>string</em>, <em>integer</em>, or <em>real</em>, then the class would represent a so called <em>basic type</em>. Most application schemas do not make use of <em>basic types</em>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gfstemplate_schemaconversionrules_properties"><a class="anchor" href="#gfstemplate_schemaconversionrules_properties"></a>3.4. Properties</h3>
<div class="sect3">
<h4 id="gfstemplate_schemaconversionrules_properties_general"><a class="anchor" href="#gfstemplate_schemaconversionrules_properties_general"></a>3.4.1. General considerations</h4>
<div class="paragraph">
<p>The following sections describe how a UML property from a type with identity is converted by the gfs template target. That includes UML properties inherited from supertypes (including from <a href="#gfstemplate_schemaconversionrules_types_mixin">mixin types</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In case that a property P1 of a type with identity restricts / overrides a property P2 from a supertype, then P1 is encoded, rather than P2. For example, if P2 had type GM_Object, and P1 had type GM_Point, then the resulting property definition would have the more specific <code>&lt;Type&gt;</code> = Point.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The UML property is represented by either a <code>&lt;GeomPropertyDefn&gt;</code> or <code>&lt;PropertyDefn&gt;</code> element. The former is used if the <code>&lt;Type&gt;</code> of the property is determined to be one of the geometric types supported by the GDAL GML driver.</p>
</div>
<div class="paragraph">
<p>The gfs template target can encode additional property definition elements for a given UML property, for two reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the XML encoding of the element that represents the property in GML data has one or more relevant XML attributes, in addition to the textual value of the element, the target creates <code>&lt;PropertyDefn&gt;</code> elements for these attributes (if - and only if - their local names are within the value space of target parameter <em>xmlAttributesToEncode</em> - see <a href="#gfstemplate_xmlAttributesToEncode">below</a> for further details). Currently, that is done for XML attribute "uom". For example: A UML property "width" may have the ISO 19103 type "Measure" or "Length" as value type, which, in GML data, is typically encoded using an element with type = gml:MeasureType. That type has XML attribute "uom". This UML property would be encoded as a <code>&lt;PropertyDefn&gt;</code> with <code>&lt;Name&gt;width_uom&lt;/Name&gt;</code>, <code>&lt;ElementPath&gt;width@uom&lt;/ElementPath&gt;</code>, and <code>&lt;Type&gt;String&lt;/Type&gt;</code>.</p>
</li>
<li>
<p>If the UML property has a data type or union as value type, the target attempts to create a representation that is compatible with the capabilities of the GDAL GML driver. Since structured types without identity cannot be represented in a gfs file, data types and unions can only be represented via an on-the-fly flattening of their properties, and only with a specific restriction: the semantics of a complex data type, that it is a set (without identity) of individual property values, will be lost for UML properties that have a data type as value type and a maximum multiplicity greater than 1.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
That restriction can be taken a step further: A property P1 with a union as value type can also be problematic, in case that the union has a property P2 with a data type as value type. If P1 has max multiplicity &gt; 1, then the datatype semantics can no longer be represented by a gfs template - even if P2 has max multiplicity 1. The reason is that in case that P1 has multiple values with data types in the GML data, all values of the data type properties would, when the GML data is read, be aggregated in plain lists - one per data type property - and thus the information of which of these data type property values belong together would be lost. The situation could be made even more complex, with union properties themselves having data types or unions as values, and so on an so forth. These situations are considered to be edge cases. Typically, unions are used as type discriminators. Choices between options with data type value can be modelled using OCL constraints. In order to keep the complexity of the gfs template target on a reasonable level, recognition of these edge cases is omitted. If support for these edge cases turns out to be required in the future, the target can be enhanced accordingly.
</td>
</tr>
</table>
</div>
<div id="gfstemplate_xmlAttributesToEncode" class="paragraph">
<p>A <code>&lt;PropertyDefn&gt;</code> that would target an XML attribute in its element path is ONLY encoded, if the attribute name is contained in the value list of target parameter <em>xmlAttributesToEncode</em> (which has a comma-separated list of values; default is: href, uom). That is especially important if "href" is not included in the list of values of this target parameter, because then byReference-encoded properties (whose value type is a type with identity), and code list valued properties (with GML 3.3 encoded code list) would be omitted!</p>
</div>
<div class="paragraph">
<p>Another special case is a UML property whose value type is a data type, and that type is a supertype of one or more (direct or indirect) subtypes. Actual GML data may use any non-abstract type within that data type hierarchy as value. In such a model situation, property definition elements are encoded for all non-abstract types within the data type hierarchy. The <code>&lt;ElementPath&gt;</code> of according <code>&lt;PropertyDefn&gt;</code> elements will have to be different - due to the different data type names which may occur in the GML data. Since multiple property definitions for UML properties with same name are encoded in this situation, especially for the properties defined by the supertype data type (which are inherited by, and thus occur in all of its subtypes), the <code>&lt;Name&gt;`s of these property definitions must be different in order to ensure unique property names in the `&lt;GMLFeatureClass&gt;</code>. Therefore, the owner type name is included as differentiator in the <code>&lt;Name&gt;</code> element. That situation is illustrated in <a href="#img_gfs_template_data_type_supertype_as_value_type">Figure 1</a>.</p>
</div>
<div id="img_gfs_template_data_type_supertype_as_value_type" class="imageblock text-center">
<div class="content">
<img src="./../images/gfs_template_data_type_supertype_as_value_type.png" alt="gfs template data type supertype as value type">
</div>
<div class="title">Figure 1. Feature with data type valued property, with that type being a supertype</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If target parameter <em>alwaysEncodeDataTypeName</em> is equal to, ignoring case, "true", then the name of the owner (class) of a property is always included in the <code>&lt;Name&gt;</code> element, if the owner is a complex data type. The default parameter value is "false".
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Properties from enumerations and code lists are not converted by this target.
</td>
</tr>
</table>
</div>
<div id="gfstemplate_schemaconversionrules_properties_general_inlineorbyreference" class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
There is a particular restriction of the GDAL GML driver: In actual GML data, the value of a UML property whose type is a type with identity (that is not implemented as String, Integer, or Real), must either always be encoded inline, or always be encoded by reference. The GML schema may support both types of encodings. In application schemas, this is controlled via tagged value <em>inlineOrByReference</em>. If the tagged value is omitted or has value "inlineOrByReference", both encodings are possible, from the GML encoding perspective. The gfs template target requires that a single encoding option be chosen in this case. The choice is made via target parameter <em>choiceForInlineOrByReference</em>, with values "inline" and "byReference" (the default value for this target parameter). The target can thus determine an effective value for tag <em>inlineOrByReference</em> (to either "inline" or "byReference") - even if the tag is not defined for a property, or if it has value "inlineOrByReference".
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If the GML data makes use of xlink:href XML attributes for object references or code references (e.g. in a GML 3.3 based encoding), do NOT invoke the GML driver with the <code>GML_SKIP_RESOLVE_ELEMS</code> configuration option. That option actually creates a copy of the GML file, with all xlink:href references resolved by copying the referenced resource into the element that contains the xlink:href XML attribute. A particular use case in which that configuration option would be useful is when parts of geometry elements in the GML data are re-used by other geometry elements, and xlink:href is only used to enable that kind of re-use.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="gfstemplate_schemaconversionrules_properties_name"><a class="anchor" href="#gfstemplate_schemaconversionrules_properties_name"></a>3.4.2. Name</h4>
<div class="paragraph">
<p>The <code>&lt;Name&gt;</code> of a property definition is the name of the UML property. There can be situations in which the name is augmented:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the UML property P belongs to a «dataType» or «union» type, then the <code>&lt;Name&gt;</code> is the list of names of all the UML properties, beginning with a UML property in a type with identity that is at the start of the path to P, and ending at P. The names are concatenated with the separator that is defined by target parameter <em>propertyNameSeparator</em>, which uses the underscore ("_") as default.</p>
</li>
<li>
<p>If the value type of a UML property is a «dataType», and that type is a supertype, the data type is a subtype and the property name occurs multiple times in the whole inheritance hierarchy that the type is a part of, or target parameter <em>alwaysEncodeDataTypeName</em> is equal to, ignoring case, "true", then the paths of the property definitions that are created in that case also include the name of the actual data type that is represented by a given property definition. Examples: <code>attInTypeWithIdentity_DataTypeOne_attInDatatype</code>, <code>attInTypeWithIdentity_DataTypeTwo_attInDatatype</code>. For further details, see <a href="#gfstemplate_schemaconversionrules_properties_general">General considerations</a>.</p>
</li>
<li>
<p>If the property definition actually represents an XML attribute, then the name of the XML attribute is appended to the otherwise constructed name, using the separator defined by target parameter <em>xmlAttributeNameSeparator</em>, which has the value of target parameter <em>propertyNameSeparator</em> as default. Example: <code>width_uom</code>. The suffix is omitted in certain situations (as described in other sections), for example in case of a code list valued property and GML 3.3 code list encoding with use of the xlink:href XML attribute. For further details, see <a href="#gfstemplate_schemaconversionrules_properties_general">General considerations</a>.</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: If both <em>propertyNameSeparator</em> and <em>xmlAttributeNameSeparator</em> are undefined in the configuration, the underscore will be used in both cases. If, on the other hand, only <em>propertyNameSeparator</em> is configured, with value "/", then an XML attribute name will also be appended using "/" as separator.</p>
</li>
<li>
<p>NOTE: XML namespaces are ignored when evaluating XML attribute names. Differentiating multiple attributes with same name on the same XML element therefore is not possible. However, that is another edge case which is unlikely to occur in GML data, and even more unlikely for the XML attributes supported by the current conversion (which essentially are the XML attributes xlink:href and uom).</p>
</li>
</ul>
</div>
</li>
<li>
<p>If the value type of a UML property is a type with identity (which is not mapped to String, Integer, or Real), <em>rule-gfs-prop-inlineEncodingUsesHrefSuffix</em> applies to the property, and the <a href="#gfstemplate_schemaconversionrules_properties_general_inlineorbyreference">effective value for tag <em>inlineOrByReference</em></a> is "inline", then suffix "_href" is appended to the name. The addition supports the creation of junction tables (for further details, see <a href="https://gdal.org/drivers/vector/gml.html#building-junction-tables" class="bare">https://gdal.org/drivers/vector/gml.html#building-junction-tables</a>).</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: The byReference encoding case is covered by the rules for property definitions that represent XML attributes.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="gfstemplate_schemaconversionrules_properties_elementpath"><a class="anchor" href="#gfstemplate_schemaconversionrules_properties_elementpath"></a>3.4.3. Element Path</h4>
<div class="paragraph">
<p>The <code>&lt;ElementPath&gt;</code> of a property definition is constructed as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In principal, for any UML property P that is on the property path for which a property definition is constructed, the name of P is appended to the element path. If P is owned by a «dataType» or «union», then the name of the owning type is put in front of the name of P, using separator "|". Example: <code>attInTypeWithIdentity|DataType|attInDatatype</code>.</p>
</li>
<li>
<p>If the property definition represents an XML attribute, @{XML attribute name} is appended to the path. Examples: <code>width@uom</code>, <code>buildingPart@href</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="gfstemplate_schemaconversionrules_properties_propertytype"><a class="anchor" href="#gfstemplate_schemaconversionrules_properties_propertytype"></a>3.4.4. Property Type</h4>
<div class="paragraph">
<p>The <code>&lt;Type&gt;</code> of a property definition - <code>&lt;PropertyDefn&gt;</code> or <code>&lt;GeomPropertyDefn&gt;</code> - is determined as follows (in descending order of priority):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the property definition represents an XML attribute, the type is 'String'.</p>
</li>
<li>
<p>If the property definition represents a UML property whose value type is <a href="#gfstemplate_schemaconversionrules_types_mappings">mapped</a>, then the type is the value of the 'targetType' defined in the according map entry.</p>
</li>
<li>
<p>If the property definition represents a UML property whose value type is a type with identity, the type is 'FeatureProperty'.</p>
</li>
<li>
<p>If the property definition represents a UML property whose value type is an enumeration or code list, the type is 'String'.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
A <code>&lt;PropertyDefn&gt;</code> only represents a UML property whose value type is «dataType» or «union» if the value type is mapped to a simple type. Otherwise, the gfs template target will drill down into the value type itself and create property definitions for the properties found there, as described in section <a href="#gfstemplate_schemaconversionrules_properties_general">General considerations</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In addition, if the maximum multiplicity of the represented UML property P is greater than 1, also in case that the property definition is for an XML attribute of an element that encodes the value(s) of P, and taking into account multiplicities along the path to P (if one of these multiplicities is greater than one, then - for the purpose of the gfs template conversion - the maximum multiplicity of the property at the end of the path effectively is greater than 1, too), then:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In case that the value type of P is mapped to one of the geometry types supported by gfs, ShapeChange will log a warning that the multiplicity of the property is ignored (and that P should be modelled with maximum multiplicity 1 and a multi-geometry type as value type [or a value type that is mapped to a multi-geometry type]).</p>
</li>
<li>
<p>Otherwise, 'List' is appended to the type name, i.e., instead of String, Integer, Real, or FeatureProperty, the target would use StringList, IntegerList, RealList, or FeaturePropertyList as <code>&lt;Type&gt;</code> value.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <code>&lt;Subtype&gt;</code> element is added to the property definition, if the value type is <a href="#gfstemplate_schemaconversionrules_types_mappings">mapped</a>, the map entry defines a particular subtype, and the subtype is allowed for the determined <code>&lt;Type&gt;</code> value.</p>
</div>
<div class="paragraph">
<p>Furthermore:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <em>rule-gfs-prop-width</em> applies to the property, the property has a non-blank value for tag <em>gfsWidth</em>, and the value determined for <code>&lt;PropertyDefn&gt;/&lt;Type&gt;</code> is 'Real', 'Integer', or 'String' (with <code>&lt;PropertyDefn&gt;/&lt;Subtype&gt;</code> NOT being 'Boolean', 'Date', 'Time', or 'Datetime'), then the <code>&lt;PropertyDefn&gt;/&lt;Width&gt;</code> element is set with the value of the tag.</p>
</li>
<li>
<p>If <em>rule-gfs-prop-precision</em> applies to the property, the property has a non-blank value for tag <em>gfsPrecision</em>, and the value determined for <code>&lt;PropertyDefn&gt;/&lt;Type&gt;</code> is 'Real', then the <code>&lt;PropertyDefn&gt;/&lt;Precision&gt;</code> element is set with the value of the tag.</p>
</li>
<li>
<p>NOTE: The GML driver does not support <code>&lt;Width&gt;</code> and <code>&lt;Precision&gt;</code> for *List types.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
There is no rule to control the value of <code>&lt;PropertyDefn&gt;/&lt;Unique&gt;</code>, since the documentation of the <code>&lt;Unique&gt;</code> element in the XML Schema of the gfs format states: <em>"When set to true, indicates that values of that field are unique through all the features of the layer"</em>. Pay attention to "through <strong>all</strong> the features". So that setting is not scoped to the values of a given property for a single feature, but to all values of the property for all features of the layer. So the semantics are quite different between property uniqueness in UML and in a gfs <code>&lt;PropertyDefn&gt;</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="gfstemplate_schemaconversionrules_properties_nullable"><a class="anchor" href="#gfstemplate_schemaconversionrules_properties_nullable"></a>3.4.5. Nullable</h4>
<div class="paragraph">
<p>By default, the gfs schema declares all property definitions as nullable. Null / missing values are allowed for any property. No specific conversion behavior is defined for setting <code>&lt;Nullable&gt;</code> to "false". If such behavior is required for specific use cases, it can be added in the future.</p>
</div>
</div>
<div class="sect3">
<h4 id="gfstemplate_schemaconversionrules_properties_readonly"><a class="anchor" href="#gfstemplate_schemaconversionrules_properties_readonly"></a>3.4.6. readOnly</h4>
<div class="paragraph">
<p>Whether a property is defined as read-only or not does not have any impact on the gfs template.</p>
</div>
</div>
<div class="sect3">
<h4 id="gfstemplate_schemaconversionrules_properties_initialvalue"><a class="anchor" href="#gfstemplate_schemaconversionrules_properties_initialvalue"></a>3.4.7. Initial Value</h4>
<div class="paragraph">
<p>Initial values do not play a role in gfs templates.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gfstemplate_schemaconversionrules_associationclass"><a class="anchor" href="#gfstemplate_schemaconversionrules_associationclass"></a>3.5. Association Class</h3>
<div class="paragraph">
<p>There is no native representation for association classes in gfs templates. The GML 3.3 encoding of association classes involves a model transformation, which is implemented by the <a href="../transformations/Association_Class_Mapper.html">ShapeChange Association Class Mapper</a>. If one of the schemas selected for processing makes use of association classes, this transformation should be performed on the model before the gfs template target is executed.</p>
</div>
</div>
<div class="sect2">
<h3 id="gfstemplate_schemaconversionrules_constraint"><a class="anchor" href="#gfstemplate_schemaconversionrules_constraint"></a>3.6. Constraints</h3>
<div class="paragraph">
<p>The gfs template target does not support conversion of OCL constraints.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
OCL constraints can be used to enrich a conceptual model with requirements that cannot be expressed in UML alone.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="gfstemplate_schemaconversionrules_additionalrules"><a class="anchor" href="#gfstemplate_schemaconversionrules_additionalrules"></a>3.7. Additional rules</h3>
<div class="paragraph">
<p>If <em>rule-gfs-all-notEncoded</em> applies to an element of the application schema, then that element and all its components are not encoded. This can be useful to suppress the encoding of classes that are primarily meant as feature collections, i.e., containers for objects defined in the application schema as types with identity.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
How to define the encoding rule that applies to an application schema element is documented in more detail <a href="#gfstemplate_encodingrules">here</a>. The <a href="https://shapechange.net/resources/config/StandardRules.xml">ShapeChange configuration file StandardRules.xml</a> defines an encoding rule named "notEncoded", which includes <em>rule-gfs-all-notEncoded</em>. When StandardRules.xml is included in the configuration of the gfs template target (typically using an xinclude XML element), then by setting tagged value <em>gfsEncodingRule</em> to "notEncoded", one would achieve that that model element is not encoded in the gfs template files.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If a property is encountered whose value type is not encoded (<em>rule-gfs-all-notEncoded</em> applies to the value type), the target will log a warning and ignore the property.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gfstemplate_encodingrules"><a class="anchor" href="#gfstemplate_encodingrules"></a>4. Encoding Rules</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For some application schemas, it is useful to know that different encoding rules can be applied to the sub-packages, classes, and properties defined by the schema. Typically, a single encoding rule applies to all application schema elements. In ShapeChange, that rule is identified by setting the target parameter <em>defaultEncodingRule</em>, with the unique name defined for the encoding rule in the target configuration. The target configuration, however, can contain multiple encoding rules (with different names). By setting tagged value <em>gfsEncodingRule</em> on an application schema element, using the name of another encoding rule, the model element will be encoded as defined by that rule.</p>
</div>
</div>
</div>
</div>
</body>
</html>