<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>ldproxy Target</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
/*! Stylesheet for CodeRay to loosely match GitHub themes | MIT License */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid;opacity:.35;padding:0 .5em 0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff!important;background:navy!important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:navy}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:teal}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:teal}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:teal}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword{color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:teal}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body id="ldproxy2" class="book toc2 toc-left">
<div id="header">
<h1>ldproxy Target</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of contents</div>
<ul class="sectlevel1">
<li><a href="#ldproxy2_overview">1. Overview</a></li>
<li><a href="#ldproxy2_schemaconversionrules">2. Schema Conversion Rules</a>
<ul class="sectlevel2">
<li><a href="#ldproxy2_schemaconversionrules_templates">2.1. Configuration file templates</a></li>
<li><a href="#ldproxy2_schemaconversionrules_documentation">2.2. Documentation</a></li>
<li><a href="#ldproxy2_schemaconversionrules_schemapackage">2.3. Schema Packages</a>
<ul class="sectlevel3">
<li><a href="#ldproxy2_schemaconversionrules_schemapackage_providerconfig">2.3.1. Provider Configuration</a></li>
<li><a href="#ldproxy2_schemaconversionrules_schemapackage_serviceconfig">2.3.2. Service Configuration</a>
<ul class="sectlevel4">
<li><a href="#ldproxy2_building_block_features_gml">2.3.2.1. Features - GML</a></li>
<li><a href="#ldproxy2_building_block_features_geojson">2.3.2.2. Features - GeoJSON</a></li>
<li><a href="#ldproxy2_building_block_features_jsonfg">2.3.2.3. Features - JSON-FG</a></li>
<li><a href="#ldproxy2_queryables">2.3.2.4. Queryables</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#ldproxy2_schemaconversionrules_types">2.4. Types</a>
<ul class="sectlevel3">
<li><a href="#ldproxy2_schemaconversionrules_types_mappings">2.4.1. Mappings</a></li>
<li><a href="#ldproxy2_schemaconversionrules_types_abstractness">2.4.2. Abstractness</a></li>
<li><a href="#ldproxy2_schemaconversionrules_types_inheritance_and_specialization">2.4.3. Inheritance and Specialization</a></li>
<li><a href="#ldproxy2_schemaconversionrules_types_database_table_names">2.4.4. Database Table Name</a></li>
<li><a href="#ldproxy2_schemaconversionrules_types_featureandobjecttype">2.4.5. Feature and Object Type</a>
<ul class="sectlevel4">
<li><a href="#ldproxy2_schemaconversionrules_types_featureandobjecttype_providertype">2.4.5.1. Provider Type Definition</a></li>
<li><a href="#ldproxy2_schemaconversionrules_types_featureandobjecttype_servicecollection">2.4.5.2. Service Collection Definition</a></li>
<li><a href="#ldproxy2_schemaconversionrules_types_featureandobjecttype_identifier">2.4.5.3. Identifier member</a></li>
<li><a href="#ldproxy2_schemaconversionrules_types_primarygeometry">2.4.5.4. Primary Geometry</a></li>
<li><a href="#ldproxy2_schemaconversionrules_types_primarytemporalproperties">2.4.5.5. Primary Temporal Properties</a></li>
</ul>
</li>
<li><a href="#ldproxy2_schemaconversionrules_types_datatype">2.4.6. Data Type</a></li>
<li><a href="#ldproxy2_schemaconversionrules_types_mixin">2.4.7. Mixin Type</a></li>
<li><a href="#ldproxy2_schemaconversionrules_types_union">2.4.8. Union</a></li>
<li><a href="#ldproxy2_schemaconversionrules_types_enumeration_and_codelist">2.4.9. Enumeration and Code List</a></li>
<li><a href="#ldproxy2_schemaconversionrules_types_basictype">2.4.10. Basic Type</a></li>
</ul>
</li>
<li><a href="#ldproxy2_schemaconversionrules_properties">2.5. Properties</a>
<ul class="sectlevel3">
<li><a href="#ldproxy2_schemaconversionrules_properties_sourcepaths">2.5.1. Source Paths</a>
<ul class="sectlevel4">
<li><a href="#ldproxy2_schemaconversionrules_properties_sourcepaths_columnname">2.5.1.1. Database Column Name</a></li>
<li><a href="#ldproxy2_schemaconversionrules_properties_sourcepaths_accesspropertyvalues">2.5.1.2. Accessing Property Values</a></li>
</ul>
</li>
<li><a href="#ldproxy2_schemaconversionrules_properties_propertytype">2.5.2. Property Type</a></li>
<li><a href="#ldproxy2_schemaconversionrules_properties_multiplicity_voidable">2.5.3. Multiplicity and Voidable</a></li>
<li><a href="#ldproxy2_schemaconversionrules_properties_readonly">2.5.4. readOnly</a></li>
<li><a href="#ldproxy2_schemaconversionrules_properties_initialvalue">2.5.5. Initial Value</a></li>
<li><a href="#ldproxy2_Unit_of_Measure">2.5.6. Unit of Measure</a></li>
<li><a href="#ldproxy2_schemaconversionrules_properties_serviceconfig">2.5.7. Additional Service Configuration Items</a>
<ul class="sectlevel4">
<li><a href="#ldproxy2_schemaconversionrules_properties_serviceconfig_featureshtml_transformations">2.5.7.1. Features HTML API-Module, Property Transformations</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#ldproxy2_schemaconversionrules_associationclass">2.6. Association Class</a></li>
<li><a href="#ldproxy2_schemaconversionrules_constraint">2.7. Constraints</a></li>
<li><a href="#ldproxy2_schemaconversionrules_additionalrules">2.8. Additional rules</a></li>
<li><a href="#ldproxy2_schemaconversionrules_specificrules">2.9. Specific rules</a>
<ul class="sectlevel3">
<li><a href="#ldproxy2_schemaconversionrules_specificrules_genericvaluetypes">2.9.1. Conversion of generic value types</a></li>
<li><a href="#ldproxy2_schemaconversionrules_specificrules_coretable">2.9.2. Coretable Approach</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#ldproxy2_encodingrules">3. Encoding Rules</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>(from v2.12.0)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This target supports ldproxy versions 3.1.0 and upwards.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ldproxy2_overview"><a class="anchor" href="#ldproxy2_overview"></a>1. Overview</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="ldproxy2_schemaconversionrules"><a class="anchor" href="#ldproxy2_schemaconversionrules"></a>2. Schema Conversion Rules</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following subsections describe a number of conversion rules, which define how the contents of application schemas are converted to ldproxy configuration files.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
An encoding rule consists of a set of conversion rules â€“ as required by a community. The <a href="#ldproxy2_encodingrules">Encoding Rules</a> section describes how encoding rules can be defined.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="ldproxy2_schemaconversionrules_templates"><a class="anchor" href="#ldproxy2_schemaconversionrules_templates"></a>2.1. Configuration file templates</h3>
<div class="paragraph">
<p>The ldproxy target creates the following folder structure in the output directory:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>data</p>
<div class="ulist">
<ul>
<li>
<p>store</p>
<div class="ulist">
<ul>
<li>
<p>entities</p>
<div class="ulist">
<ul>
<li>
<p>codelists (only if a codelist or enumeration is actually encoded)</p>
</li>
<li>
<p>providers</p>
</li>
<li>
<p>services</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The target output will be written to these folders.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
Make sure that when copying the output files, you end up with this folder structure! Do not, for example, forget to create the 'entities' folder by just copying the 'codelists', 'providers', and 'services' folders to a 'store' folder. Otherwise, ldproxy will just assume that the store is empty.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Some configuration data can simply be copied using template files. <a href="#table_template_files">Table 1</a> lists the templates that the target uses, with information about:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The name of the ShapeChange target parameter with which the path to the template file can be provided.</p>
</li>
<li>
<p>If applicable: The default template location, i.e. the path that will be used by the target if no path is given via the target parameter.</p>
</li>
<li>
<p>If applicable: The path within the output folder to which the template file will be copied.</p>
</li>
<li>
<p>A description of the template file.</p>
</li>
</ul>
</div>
<table id="table_template_files" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Configuration file templates</caption>
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">target parameter name</th>
<th class="tableblock halign-left valign-top">default template location</th>
<th class="tableblock halign-left valign-top">output folder</th>
<th class="tableblock halign-left valign-top">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cfgTemplatePath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://shapechange.net/resources/templates/ldproxy2/cfgTemplate.yml" class="bare">https://shapechange.net/resources/templates/ldproxy2/cfgTemplate.yml</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">data/cfg.yml</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The cfg.yml contains the global configuration for all APIs in the intended API deployment.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">serviceConfigTemplatePath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>none</em> - Nevertheless, an example is provided at <a href="https://shapechange.net/resources/templates/ldproxy2/serviceConfigTemplate.yml" class="bare">https://shapechange.net/resources/templates/ldproxy2/serviceConfigTemplate.yml</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>none</em> - will be integrated into the service configuration</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The object defined by this template file will be patched into the service configuration. This is useful to, for example, define service metadata.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ldproxy2_schemaconversionrules_documentation"><a class="anchor" href="#ldproxy2_schemaconversionrules_documentation"></a>2.2. Documentation</h3>
<div class="paragraph">
<p>With <em>rule-ldp2-all-documentation</em>, descriptive information of application schema elements (for ldproxy that primarily means classes and their properties) can be encoded within the ldproxy configuration, more specifically: in <em>label</em> and <em>description</em> members of type definitions.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Descriptive information of a model element in ShapeChange, i.e. properties (attributes and association roles), classes, and packages, includes the pieces of information, called <em>descriptors</em>, that are documented <a href="../get started/The_element_input.html#Descriptor_sources">here</a>.</p>
</div>
<div class="paragraph">
<p>A model element can have all, a subset, or none of these descriptors.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Typically, a community has a preferred way to model and encode this information. For example, one community may want to encode just the description of a property via the "description" member in the provider configuration, while another may prefer to encode the values of multiple descriptors of the property within the "description" member. Therefore,  templates are used to define the (combination of) descriptor(s) that shall be used as value for <em>label</em> and <em>description</em> members:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>target parameter <em>labelTemplate</em>:</p>
<div class="ulist">
<ul>
<li>
<p>default value: [[alias]]</p>
</li>
<li>
<p>explanation: The template for the <em>label</em> member generated for a type definition. The patterns "[[descriptor]]" will be replaced by the value of the descriptor, or the value of parameter <em>descriptorNoValue</em>, if the descriptor has no value for the model element.</p>
</li>
</ul>
</div>
</li>
<li>
<p>target parameter <em>descriptionTemplate</em>:</p>
<div class="ulist">
<ul>
<li>
<p>default value: [[definition]]</p>
</li>
<li>
<p>explanation: The template for the <em>description</em> member generated for a type definition. The patterns "[[descriptor]]" will be replaced by the value of the descriptor, or the value of parameter <em>descriptorNoValue</em>, if the descriptor has no value for the model element.</p>
</li>
</ul>
</div>
</li>
<li>
<p>target parameter <em>descriptorNoValue</em>:</p>
<div class="ulist">
<ul>
<li>
<p>default value: "" (i.e., the empty string)</p>
</li>
<li>
<p>explanation: If a descriptor is used in a label or description template, but has no value, then the value of this parameter will be used instead.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If the resulting value for label or description is blank, i.e. the empty string or only whitespace, then the value will not be encoded.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ldproxy2_schemaconversionrules_schemapackage"><a class="anchor" href="#ldproxy2_schemaconversionrules_schemapackage"></a>2.3. Schema Packages</h3>
<div class="paragraph">
<p>Schema packages have the stereotype &lt;&lt;applicationSchema&gt;&gt;, &lt;&lt;schema&gt;&gt;, or an alias (e.g. using a specific language, like &lt;&lt;anwendungsschema&gt;&gt;). An &lt;&lt;applicationSchema&gt;&gt; package represents an application schema according to ISO 19109. The stereotype &lt;&lt;schema&gt;&gt; has been introduced for packages that should be treated like application schemas, but do not contain feature types. Such schemas are compliant to ISO 19103; examples are ISO 191xx schemas.</p>
</div>
<div class="paragraph">
<p>This ldproxy target is a so-called "ShapeChange Single Target", i.e. it converts all <a href="../targets/Output_Targets.html#Selecting_the_Schemas_to_Process">schemas selected for processing</a> in one go, rather than handling each of these schemas separately.</p>
</div>
<div class="paragraph">
<p>The target creates a single provider configuration (in folder data/store/entities/providers) as well as a single service configuration file (in folder data/store/entities/services). The names of these files are given by the name of the <a href="../get started/The_element_input.html#mainAppSchema">main schema</a>, in all lower case, and non-word characters replaced by '_'. The resulting name is also used as the id within these files. The encoding details for each of the two configuration files are documented in sections <a href="#ldproxy2_schemaconversionrules_schemapackage_providerconfig">Provider Configuration</a> and <a href="#ldproxy2_schemaconversionrules_schemapackage_serviceconfig">Service Configuration</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If a single API (provider and service configuration) shall be created for each schema, set the <a href="../targets/Output_Targets.html#Selecting_the_Schemas_to_Process">schema selection parameter</a> appropriately. If multiple schemas need to be processed, and each shall result in a different API, then either run ShapeChange multiple times (updating the schema selection parameters each time) or define multiple ldproxy targets (each selecting a different schema for processing).
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_schemapackage_providerconfig"><a class="anchor" href="#ldproxy2_schemaconversionrules_schemapackage_providerconfig"></a>2.3.1. Provider Configuration</h4>
<div class="paragraph">
<p>The following information items are added to the provider configuration file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>id: the provider name (derived from the main schema, as defined in section <a href="#ldproxy2_schemaconversionrules_schemapackage">Schema Packages</a>)</p>
</li>
<li>
<p>createdAt and lastModified: receive the integer value for an automatically generated unix time stamp (fixed for UnitTests)</p>
</li>
<li>
<p>entityStorageVersion: 2</p>
</li>
<li>
<p>providerType: FEATURE</p>
</li>
<li>
<p>featureProviderType: SQL</p>
</li>
<li>
<p>connectionInfo:</p>
<div class="ulist">
<ul>
<li>
<p>dialect: PGIS</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: A future enhancement of this target may support GeoPackage (dialect: GPKG).</p>
</li>
</ul>
</div>
</li>
<li>
<p>database: FIXME</p>
</li>
<li>
<p>host: FIXME</p>
</li>
<li>
<p>user: FIXME</p>
</li>
<li>
<p>password: FIXME-base64-encoded</p>
</li>
<li>
<p>schemas: "public" - and, if <em>rule-ldp2-all-schemas</em> is active, all values from tags <em>sqlSchema</em> on the package elements of all processed schemas</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: This corresponds to the database schema definition mechanism supported by the SqlDdl target in <em>rule-sql-all-schemas</em>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>sourcePathDefaults:</p>
<div class="ulist">
<ul>
<li>
<p>primaryKey: value of target parameter <em>primaryKeyColumn</em>; default: id</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: Corresponds to SqlDdl target parameter <em>idColumnName</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>sortKey: same as primaryKey</p>
</li>
</ul>
</div>
</li>
<li>
<p>queryGeneration:</p>
<div class="ulist">
<ul>
<li>
<p>computeNumberMatched: true</p>
</li>
</ul>
</div>
</li>
<li>
<p>nativeCrs:</p>
<div class="ulist">
<ul>
<li>
<p>code: value of target parameter <em>srid</em>; default is 4326</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: The SqlDdl target has a similar parameter.</p>
</li>
</ul>
</div>
</li>
<li>
<p>forceAxisOrder: value of target parameter <em>forceAxisOrder</em>; default is NONE</p>
</li>
</ul>
</div>
</li>
<li>
<p>nativeTimeZone: value of target parameter <em>nativeTimeZone</em>; default: NONE</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: The time-zone ID is given as a string like 'Europe/Paris'. Internally, parsing is achieved using the Java ZoneId class and its static <code>of(String zoneId)</code> method. The system default time-zone ID is determined via the static <code>systemDefault()</code> method. For further information about the allowed formats of the time-zone ID, consult the documentation of the Java ZoneId class and the two methods.</p>
</li>
</ul>
</div>
</li>
<li>
<p>types: will be populated as described in section <a href="#ldproxy2_schemaconversionrules_types">Types</a></p>
</li>
<li>
<p>fragments: will be generated if target parameter <em>enableFragments</em> is set to true. For further details, see section <a href="#ldproxy2_schemaconversionrules_types_inheritance_and_specialization">Inheritance and Specialization</a>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Members of the provider configuration, whose value is equal to the default value for that member defined by ldproxy, may not actually be written to the provider configuration file created by the target.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The deployment-specific values of the <code>connectionInfo</code> member - i.e. the database, host, user, and password - should either be set via environment variables, or via an overriding configuration file. The override would be placed in folder store/overrides/providers and carry the same name as the provider configuration whose connection infos shall be overridden.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_schemapackage_serviceconfig"><a class="anchor" href="#ldproxy2_schemaconversionrules_schemapackage_serviceconfig"></a>2.3.2. Service Configuration</h4>
<div class="paragraph">
<p>The following information items are added to the service configuration file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>id: the service name (derived from the main schema, as defined in section <a href="#ldproxy2_schemaconversionrules_schemapackage">Schema Packages</a>)</p>
</li>
<li>
<p>createdAt and lastModified: receive the integer value for an automatically generated unix time stamp (fixed for UnitTests)</p>
</li>
<li>
<p>entityStorageVersion: 2</p>
</li>
<li>
<p>label: value of target parameter <em>serviceLabel</em>; default is 'FIXME'</p>
</li>
<li>
<p>description: value of target parameter <em>serviceDescription</em>; default is 'FIXME'</p>
</li>
<li>
<p>serviceType: OGC_API</p>
</li>
<li>
<p>metadata: can be provided - in form of a template - via target parameter <em>serviceConfigTemplatePath</em>; metadata information for the actual API is typically not included in the model, therefore the target uses information provided via a separate template file</p>
</li>
<li>
<p>api: can be provided - in form of a template - via target parameter <em>serviceConfigTemplatePath</em>; information about the modules implemented by the actual API is typically not included in the model, therefore the target uses information provided via a separate template file</p>
</li>
<li>
<p>collections: will be populated as described in section <a href="#ldproxy2_schemaconversionrules_types">Types</a>.</p>
</li>
<li>
<p>If target parameter <em>enableGmlOutput</em> is 'true' (default being 'false'), then API building blocks
as described in subsection <a href="#ldproxy2_building_block_features_gml">Features - GML</a> are added to the service configuration.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Members of the service configuration, whose value is equal to the default value for that member defined by ldproxy, may not actually be written to the service configuration file created by the target.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="ldproxy2_building_block_features_gml"><a class="anchor" href="#ldproxy2_building_block_features_gml"></a>2.3.2.1. Features - GML</h5>
<div class="paragraph">
<p>Version 3.3.0 of ldproxy supports encoding data as GML. The documentation of
ldproxy building block Features - GML describes relevant configuration items.
By setting target parameter <em>enableFeaturesGml</em> to 'true',
ShapeChange will add ldproxy building block
<a href="https://docs.ldproxy.net/services/building-blocks/features_-_gml.html">Features - GML</a>
to the service configuration as enabled.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The initial name of the target parameter was <em>enableGmlOutput</em>. For backwards compatibility of existing ShapeChange configurations, the old parameter name is supported
as an alias for <em>enableFeaturesGml</em>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The target thereby needs to know how application schema elements shall be represented in
XML. In other words, it needs to know how the desired XML encoding looks like. This
information can be generated by the <a href="./xml schema/XML_Schema.html">XmlSchema target</a>,
if parameter <em>writeXmlEncodingInfos</em> is set to 'true' there. The format of the XML
encoding infos generated by the XmlSchema target is documented <a href="./xml schema/XML_Encoding_Infos.html">here</a>. The XML encoding infos need to be placed within the <code>advancedProcessConfigurations</code>
element of the ldproxy target configuration. The ShapeChange workflow may thus need to be
run twice - first, to generate XML schemas and their XML encoding infos, and then to
derive the ldproxy configuration files, using the XML encoding infos in the configuration
of the ldproxy target. The following example shows how this is done:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre></td>
  <td class="code"><pre><span class="tag">&lt;Target</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">de.interactive_instruments.ShapeChange.Target.Ldproxy2.Ldproxy2Target</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">mode</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">enabled</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">inputs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TRF_END</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;advancedProcessConfigurations&gt;</span>
    <span class="tag">&lt;XmlEncodingInfos&gt;</span>
      <span class="tag">&lt;modelElementEncodings&gt;</span>
        <span class="tag">&lt;ModelElementXmlEncoding</span> <span class="attribute-name">applicationSchemaName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cross Schema A</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">modelElementName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">FeatureTypeA</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">AbstractFeatureTypeA</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlNamespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://shapechange.net/test/a</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;ModelElementXmlEncoding</span> <span class="attribute-name">applicationSchemaName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cross Schema A</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">modelElementName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">FeatureTypeA::attMeasure</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">attMeasure</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlNamespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://shapechange.net/test/a</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;ModelElementXmlEncoding</span> <span class="attribute-name">applicationSchemaName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cross Schema A</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">modelElementName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">FeatureTypeA::ftAtoTA</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ftAtoTA</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlNamespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://shapechange.net/test/a</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;ModelElementXmlEncoding</span> <span class="attribute-name">applicationSchemaName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cross Schema A</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">modelElementName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">FeatureTypeA::geom</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">geom</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlNamespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://shapechange.net/test/a</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;ModelElementXmlEncoding</span> <span class="attribute-name">applicationSchemaName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cross Schema A</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">modelElementName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">DataTypeA</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">DataTypeA</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlNamespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://shapechange.net/test/a</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;ModelElementXmlEncoding</span> <span class="attribute-name">applicationSchemaName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cross Schema A</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">modelElementName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">DataTypeA::att1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">att1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlNamespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://shapechange.net/test/a</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;ModelElementXmlEncoding</span> <span class="attribute-name">applicationSchemaName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cross Schema A</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">modelElementName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">DataTypeA::att2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlAttribute</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">att2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlNamespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://shapechange.net/test/a</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;ModelElementXmlEncoding</span> <span class="attribute-name">applicationSchemaName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cross Schema A</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">modelElementName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TypeA</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TypeA</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlNamespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://shapechange.net/test/a</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;ModelElementXmlEncoding</span> <span class="attribute-name">applicationSchemaName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cross Schema A</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">modelElementName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TypeA::attCodelistA</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">attCodelistA</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlNamespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://shapechange.net/test/a</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/modelElementEncodings&gt;</span>
      <span class="tag">&lt;namespaces&gt;</span>
        <span class="tag">&lt;XmlNamespace</span> <span class="attribute-name">ns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://shapechange.net/test/a</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">nsabr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/namespaces&gt;</span>
    <span class="tag">&lt;/XmlEncodingInfos&gt;</span>
    <span class="tag">&lt;XmlEncodingInfos&gt;</span>
      <span class="tag">&lt;modelElementEncodings&gt;</span>
        <span class="tag">&lt;ModelElementXmlEncoding</span> <span class="attribute-name">applicationSchemaName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cross Schema B</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">modelElementName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">FeatureTypeB</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">FeatureTypeB</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlNamespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://shapechange.net/test/b</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;ModelElementXmlEncoding</span> <span class="attribute-name">applicationSchemaName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cross Schema B</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">modelElementName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">FeatureTypeB::att1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlAttribute</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">att1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlNamespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://shapechange.net/test/b</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;ModelElementXmlEncoding</span> <span class="attribute-name">applicationSchemaName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cross Schema B</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">modelElementName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">FeatureTypeB::att2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">att2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlNamespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://shapechange.net/test/b</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;ModelElementXmlEncoding</span> <span class="attribute-name">applicationSchemaName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cross Schema B</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">modelElementName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">FeatureTypeB::att3</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">att3</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlNamespace</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://shapechange.net/test/b</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/modelElementEncodings&gt;</span>
      <span class="tag">&lt;namespaces&gt;</span>
        <span class="tag">&lt;XmlNamespace</span> <span class="attribute-name">ns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://shapechange.net/test/b</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">nsabr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/namespaces&gt;</span>
    <span class="tag">&lt;/XmlEncodingInfos&gt;</span>
  <span class="tag">&lt;/advancedProcessConfigurations&gt;</span>
  <span class="tag">&lt;targetParameter</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outputDirectory</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">results/ldproxy2/gmlOutput</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="comment">&lt;!-- ... other configuration items omitted for brevity ... --&gt;</span>
<span class="tag">&lt;/Target&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The ldproxy target attempts to identify the XML encoding of a particular model element as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First, it is necessary to understand the concept that a schema which has been transformed
can be significantly different to the one from which the XML schema has been derived. The schema
and class to which a property belonged in the input model can be changed by flattening inheritance
and flattening complex types. The same applies to the property name - it may also be changed by a
transformation. If inheritance or complex types have been flattened, the original class, schema, as
well as property name can be documented in tagged values <em>originalSchemaName</em>, <em>originalInClassName</em>,
and <em>originalPropertyName</em>. For further details as to which properties exactly are tagged this
way, see the documentation of the Tagged Value transformation rule
<a href="../transformations/Tagged_Value_Transformer.html#rule-trf-taggedValue-createOriginalSchemaInformationTags">rule-trf-taggedValue-createOriginalSchemaInformationTags</a>, as well as the Flattener transformation rules
<a href="../transformations/Flattener.html#rule-trf-cls-flatten-inheritance">rule-trf-cls-flatten-inheritance</a>
and <a href="../transformations/Flattener.html#rule-trf-prop-flatten-types">rule-trf-prop-flatten-types</a>.
If these tags are set, they are used when looking up the XML namespace and XML name of a model element.
Otherwise, the name of the model element, in case of a property also the class that owns it, as
well as the schema are taken directly from the model.</p>
</li>
<li>
<p>For a model element - classes and properties -, the XML namespace in which it is XML
encoded needs to be known.
If no <code>ModelElementXmlEncoding</code> element defines that namespace, then ShapeChange
uses the target namespace of the schema the model element belongs to in the model. The target
namespace is either defined by tag <code>targetNamespace</code> on the schema package, or via <code>PackageInfo</code>
elements in the ShapeChange configuration. If no namespace can be identified this way, either,
then a value of 'fixme' with a counter is assigned to the schema package.</p>
</li>
<li>
<p>The XML namespace abbreviation to use for the XML namespace is determined in a similar manner.
First, namespace definitions in the XML encoding infos are checked. If they do not contain a
definition for the namespace, the model is checked (tag <code>xmlns</code> of the schema package, and
subsequently <code>PackageInfo</code> elements of the ShapeChange configuration). If all else fails, a value
of 'fixme' plus a counter is assigned.</p>
</li>
<li>
<p>The XML name of the model element is looked up in the XML encoding infos, taking into
account tags <em>originalSchemaName</em>, <em>originalInClassName</em>, and <em>originalPropertyName</em>, if set.
If the XML name was not found this way, the model element name is used - unless, for a property,
tag <em>originalPropertyName</em> has a value; in that case, that value is used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The target creates a general GML API building block in the service configuration. It contains
the following members:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The XML namespaces and their abbreviations of model elements that are processed by the target
are encoded within the <code>applicationNamespaces</code> member.</p>
</li>
<li>
<p>The XML namespace abbreviation of the main application schema is assigned as value of the
<code>defaultNamespace</code> member.</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: The ldproxy target can process multiple application schemas at once, and the result are single
provider and service configuration files (among others, like codelist definitions). Here, the
<a href="../get started/The_element_input.html#mainAppSchema"><em>mainAppSchema</em></a> (input) parameter and
concept comes into play. If multiple schemas are processed, the one that shall be used as the default
namespace is defined by the <em>mainAppSchema</em> input parameter. If the parameter is not set, ShapeChange
acts as follows: if there is only a single schema to process, it is selected as main schema. Otherwise,
a warning is issued and the first schema that is processed by the target is chosen as main schema.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The <code>schemaLocations</code> member is populated as follows:</p>
<div class="ulist">
<ul>
<li>
<p>For the XML namespace of the main application schema, the schema location from the XML
encoding infos is used. If no location can be found this way, it is assumed that the XML schema
for this namespace shall be hosted by ldproxy itself. In that case, API building block RESOURCES
is enabled, and the schema location value will be <code>{{serviceUrl}}/resources/</code> + the value of tag
<em>xsdDocument</em> of the main application schema. Example: <code>{{serviceUrl}}/resources/myschema.xsd</code></p>
</li>
<li>
<p>For all other XML namespaces that apply to the model elements processed by the ldproxy target,
if the namespace definitions in the XML encoding infos define schema locations, then they are added.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The <code>objectTypeNamespaces</code> member is populated with the names of the object types which occur in the
provider configuration AND whose XML namespace is different to the default namespace. The name of
such an object type is used as key, while the XML namespace abbreviation is used as value.</p>
</li>
<li>
<p>If target parameter <em>gmlIdPrefix</em> is set, its value is used as value of the <code>gmlIdPrefix</code> member.</p>
</li>
<li>
<p>If target parameter <em>gmlSfLevel</em> is set (to one of the allowed values 0, 1, and 2), its value
is set as the value of the <code>gmlSfLevel</code> member.</p>
</li>
<li>
<p>Likewise, if target parameter <em>featureCollectionElementName</em> is set, its value is used in the
corresponding member. The same applies for the value of target parameters <em>featureMemberElementName</em>
and <em>supportsStandardResponseParameters</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each collection, the target generates a GML building block entry in the service configuration,
if at least one of the following situations applies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the XML name or XML namespace of a property (on any level within the type definition) is
different to the name used in the provider configuration, or the default XML namespace, a <code>rename</code>
transformation is applied to that property, using the XML QName as value (the XML namespace prefix
is omitted, if the XML namespace is the same as the default namespace).</p>
</li>
<li>
<p>If a property is encoded as an XML attribute, the property path is added as value to the
<code>xmlAttributes</code> member.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example (from one of the ShapeChange unit tests):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td>
  <td class="code"><pre><span class="key">collections</span>:
  <span class="key">featuretypeb</span>:
    <span class="key">id</span>: <span class="string"><span class="content">featuretypeb</span></span>
    <span class="key">label</span>: <span class="string"><span class="content">featuretypeb</span></span>
    <span class="key">enabled</span>: <span class="string"><span class="content">true</span></span>
    <span class="key">api</span>:
    - <span class="string"><span class="content">buildingBlock: GML</span></span>
      <span class="key">transformations</span>:
        <span class="key">att2.att1</span>:
        - <span class="string"><span class="content">rename: a:att1</span></span>
        <span class="key">att2.att2</span>:
        - <span class="string"><span class="content">rename: a:att2</span></span>
      <span class="key">conformance</span>: <span class="string"><span class="content">NONE</span></span>
      <span class="key">xmlAttributes</span>:
      - <span class="string"><span class="content">att1</span></span>
      - <span class="string"><span class="content">att2.att2</span></span></pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ldproxy2_building_block_features_geojson"><a class="anchor" href="#ldproxy2_building_block_features_geojson"></a>2.3.2.2. Features - GeoJSON</h5>
<div class="paragraph">
<p>By setting target parameter <em>enableFeaturesGeoJson</em> to 'true',
ShapeChange will add ldproxy building block
<a href="https://docs.ldproxy.net/de/services/building-blocks/features_-_geojson.html">Features - GeoJSON</a>
to the service configuration as enabled.</p>
</div>
<div class="paragraph">
<p>Currently, specific configuration items for this building block are added
through the <a href="#ldproxy2_schemaconversionrules_specificrules_genericvaluetypes">Conversion of generic value types</a>.
In the future, generation of additional configuration items for this
building block can be supported.</p>
</div>
</div>
<div class="sect4">
<h5 id="ldproxy2_building_block_features_jsonfg"><a class="anchor" href="#ldproxy2_building_block_features_jsonfg"></a>2.3.2.3. Features - JSON-FG</h5>
<div class="paragraph">
<p>By setting target parameter <em>enableFeaturesJsonFg</em> to 'true',
ShapeChange will add ldproxy building block
<a href="https://docs.ldproxy.net/de/services/building-blocks/features_-_json-fg.html">Features - JSON-FG</a>
to the service configuration as enabled.</p>
</div>
<div class="paragraph">
<p>Currently, specific configuration items for this building block are added
through the <a href="#ldproxy2_schemaconversionrules_specificrules_genericvaluetypes">Conversion of generic value types</a>.
In the future, generation of additional configuration items for this
building block can be supported.</p>
</div>
</div>
<div class="sect4">
<h5 id="ldproxy2_queryables"><a class="anchor" href="#ldproxy2_queryables"></a>2.3.2.4. Queryables</h5>
<div class="paragraph">
<p>If the main application schema matches <code>rule-ldp2-all-queryables</code>,
the target creates a QUERYABLES building block in the service configuration.
It just contains the member <code>enabled: true</code>.</p>
</div>
<div class="paragraph">
<p>For each collection, whose represented type matches <code>rule-ldp2-all-queryables</code>,
the target checks which, if any, of the properties have a name - current or original - equal
to one of the names provided by target parameter <code>queryables</code> (the parameter value is a
comma-separated list of property names; no default value is defined). If at least one such property
was found, the target creates a <code>queryables</code> member in the QUERYABLES building block
in the service configuration of the collection (adding that building block if necessary), with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>member <code>included</code> and an array of the names of all queryable properties. If a queryable association role does NOT match <em>rule-ldp2-all-linkObjectAsFeatureRef</em>, then <code>.title</code> is added to
the role name (meaning that queries will be
performed on the <code>title</code>-value of the link object that is encoded for an association role).</p>
</li>
<li>
<p>member <code>pathSeparator</code> and value DOT.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The differentiation between 'current' and 'original' property name is important when the
ldproxy target shall encode a model which has been flattened (flattening inheritance and/or complex types). When inheritance or complex types are flattened, property names can be modified.
When this happens (in the mentioned flattening cases), the original property name is documented in tagged value <em>originalPropertyName</em>. The ldproxy target checks this tag when matching
properties of a value type against the configured list of queryables.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The definition of queryable properties using the global target configuration parameter
<code>queryables</code> can be enhanced in the future. For example, it would be possible to introduce a
specific tag, to be set on a type, which would provide the names of queryable properties of that type.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Example (from one of the ShapeChange unit tests):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td>
  <td class="code"><pre><span class="key">collections</span>:
  <span class="key">featuretype</span>:
    <span class="key">id</span>: <span class="string"><span class="content">featuretype</span></span>
    <span class="key">label</span>: <span class="string"><span class="content">featuretype</span></span>
    <span class="key">enabled</span>: <span class="string"><span class="content">true</span></span>
    <span class="key">api</span>:
    - <span class="string"><span class="content">buildingBlock: QUERYABLES</span></span>
      <span class="key">included</span>:
      - <span class="string"><span class="content">attDate</span></span>
      - <span class="string"><span class="content">attInt</span></span>
      - <span class="string"><span class="content">attPoint</span></span>
      - <span class="string"><span class="content">roleFTtoT_Subtype.title</span></span>
      - <span class="string"><span class="content">roleFTtoT_Type.title</span></span>
      <span class="key">pathSeparator</span>: <span class="string"><span class="content">DOT</span></span></pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ldproxy2_schemaconversionrules_types"><a class="anchor" href="#ldproxy2_schemaconversionrules_types"></a>2.4. Types</h3>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_types_mappings"><a class="anchor" href="#ldproxy2_schemaconversionrules_types_mappings"></a>2.4.1. Mappings</h4>
<div class="paragraph">
<p>Application schemas typically use types from other schemas, for example the types defined by ISO 19103 and ISO 19107. External types can be used as value types of properties, and as supertypes for types defined in the application schema that is being converted.</p>
</div>
<div class="paragraph">
<p>Whenever an external type is used, its implementation details are needed. An external type must be implemented as one of the types supported by ldproxy, or as a link / feature reference. The target type of a map entry must therefore be one of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>FLOAT, INTEGER, STRING, BOOLEAN, DATETIME and DATE</p>
<div class="ulist">
<ul>
<li>
<p>Relevant map entry parameter(s): <em>initialValueEncoding</em> (optional, currently only used for mapping of the conceptual type 'Boolean')</p>
</li>
</ul>
</div>
</li>
<li>
<p>GEOMETRY</p>
<div class="ulist">
<ul>
<li>
<p>Relevant map entry parameter(s): <em>geometryInfos</em> (required)</p>
</li>
</ul>
</div>
</li>
<li>
<p>LINK</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: Types that are mapped to links - more specifically, link objects - are considered to be available as an external resource. Linking to such objects can be useful for integration and re-use of external APIs.</p>
</li>
<li>
<p>Relevant map entry parameter(s): <em>linkInfos</em> (required)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The semantic validation (a pre-processing step executed by ShapeChange upon loading the configuration) of the ldproxy target configuration will ensure that map entries contain required map entry parameters.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note that while a type mapping typically applies to external types, it can also be applied to a type from the application schema. For example, some identifier datatype (e.g. called 'GUID') could be defined within the application schema, but be implemented within the database and thus also in the resulting ldproxy configuration as a STRING.</p>
</div>
<div class="paragraph">
<p>A map entry for the ldproxy target has the following structure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>@type (required): The unqualified UML type/class name to be mapped. Should be unique within the model (if it is not unique, this can lead to unexpected results).</p>
</li>
<li>
<p>@rule (required): The encoding rule to which this mapping applies. May be "*" to indicate that the mapping applies to all encoding rules.</p>
</li>
<li>
<p>@targetType (required): One of FLOAT, INTEGER, STRING, BOOLEAN, DATETIME, DATE, GEOMETRY, or LINK.</p>
</li>
<li>
<p>@param (optional): Defines one or more parameters for the mapping. If no parameter is provided (leaving the 'param' attribute empty) then the map entry contains a straightforward mapping, usually to a simple type. Each parameter has a name. A list of parameters is separated by commas. Each parameter can also have characteristics defined for it, providing even further information for the conversion. Characteristics for a parameter are provided within curly braces. A characteristic usually is provided by a key-value pair, with the key being the identification of the characteristic.</p>
<div class="ulist">
<ul>
<li>
<p>Parameter <em>initialValueEncoding</em>: Defines how initial values of properties whose value type is mapped by the map entry should be encoded. Currently only relevant for mapping of type Boolean to some ldproxy type.</p>
<div class="ulist">
<ul>
<li>
<p>Characteristic: <em>true</em> (optional): Specifies the value to represent the Boolean value <code>true</code> in the mapping that the parameter applies to. Only relevant for mapping of type <code>Boolean</code>. Default is <code>true</code>.</p>
</li>
<li>
<p>Characteristic: <em>false</em> (optional): Specifies the value to represent the Boolean value <code>false</code> in the mapping that the parameter applies to. Only relevant for mapping of type <code>Boolean</code>. Default is <code>false</code>.</p>
</li>
<li>
<p>NOTE: Mappings of initial values for type Boolean are especially important if boolean values are represented in the database using a non-boolean datatype. For example, the value <code>true</code> could be represented by integer 1, while <code>false</code> would be represented by 0.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Parameter <em>geometryInfos</em>: Indicates that the map entry contains a mapping for a geometry type (specifically from ISO 19107), and provides further information via characteristics.</p>
<div class="ulist">
<ul>
<li>
<p>Characteristic <em>geometryType</em> (required): Specify the actual geometry type, using one of the geometry types supported by ldproxy: POINT, MULTI_POINT, LINE_STRING, MULTI_LINE_STRING, POLYGON, MULTI_POLYGON, GEOMETRY_COLLECTION, ANY</p>
</li>
</ul>
</div>
</li>
<li>
<p>Parameter <em>linkInfos</em>: provides information for constructing a link- object.</p>
<div class="ulist">
<ul>
<li>
<p>Characteristic: <em>urlTemplate</em> (required): Defines a template for constructing the URL to an actual property value, given an identifier value, which is represented in the template using placeholder <code>(value)</code>. The placeholder <code>(serviceUrl)</code> can be used as well. It will be replaced by an ldproxy deployment with its base URL.</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: Due to an implementation restriction in the parsing process of map entry parameters and their characteristics, braces are not directly allowed within the value of the <em>urlTemplate</em> characteristic. The target will automatically replace the parentheses ('(' and ')') around the placeholders with braces ('{' and '}') when writing them in the ldproxy configuration.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Characteristic: <em>tableName</em> (optional): Name of the database table that represents the mapped type. Is used to construct source paths, for cases in which a property with the mapped type as value type has a maximum multiplicity greater than one (which typically results in the use of an associative table, in which the mapped type must be represented with a foreign key field). The characteristic reflects the <a href="./SQL_DDL.html#Parameter_table">map entry parameter table</a> of the SQL DDL target. If the database schema has been created with such a mapping, then a corresponding mapping is likely required for the ldproxy target.</p>
</li>
<li>
<p>Characteristic: <em>representedCategory</em> (optional): The value identifies the category of the conceptual type that is identified by the map entry. Recognized values are: <code>datatype</code> and <code>codelist</code>. Primarily required for correctly creating source paths.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_types_abstractness"><a class="anchor" href="#ldproxy2_schemaconversionrules_types_abstractness"></a>2.4.2. Abstractness</h4>
<div class="paragraph">
<p>Abstract types are not converted to individual provider type definitions.
However, if target parameter <em>enableFragments</em> is set to <code>true</code>, then
abstract types will be converted to fragment definitions.</p>
</div>
</div>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_types_inheritance_and_specialization"><a class="anchor" href="#ldproxy2_schemaconversionrules_types_inheritance_and_specialization"></a>2.4.3. Inheritance and Specialization</h4>
<div class="paragraph">
<p>Since v2.14.0, conversion of inheritance relationships is supported by the target,
if target parameter <em>enableFragments</em> is set to <code>true</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Before v2.14.0, such relationships had to be transformed,
before executing the ldproxy target
(e.g. use the Flattener transformation to flatten inheritance).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>With fragments enabled, the provider configuration contains type definitions
as well as fragment definitions. The fragment definitions thereby define the
structure of a type in detail: object type, documentation, properties, etc.
However, source path information is only contained for cases in which the path
is a simple column name within the source table of the current context (e.g.,
a type definition). For other cases, the source path is
encoded within the type definition.</p>
</div>
<div class="paragraph">
<p>If a type has supertypes, then the fragment definition of the type merges
the fragment definitions of these supertypes, as well as the schema of the
properties directly owned by the type. If a class only has a single
supertype, then a direct <code>schema</code> reference (to the fragment definition
of the supertype) is used. If the class has multiple
supertypes, the <code>merge</code> keyword is used to encode the necessary references.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Multiple inheritance is only supported if no (direct or indirect)
supertype of the class uses multiple inheritance! This is currently a
restriction of ldproxy regarding the <code>merge</code> keyword.</p>
</div>
<div class="paragraph">
<p>The <code>merge</code> keyword results in a shallow merge, where property override
applies. That reflects the property override in UML, i.e., a property
defined in a subclass overrides the definition of a property with same
name that is defined in a (direct or indirect) superclass. Be aware,
though, that the <code>schema</code> reference results in a deep merge. Property
overrides in the application schema may lead to unexpected results there.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In case of multiple inheritance, the merge items are encoded in a way
that reflects the order in which the XML Schema target encodes supertype
properties (also taking into account mixin encoding). This is an important
aspect when <a href="#ldproxy2_building_block_features_gml">Features - GML</a> shall be supported by the resulting
ldproxy configuration.</p>
</div>
<div class="paragraph">
<p>A type definition references the according fragment definition via a <code>schema</code> member.
The type definition encodes the source path to identify the objects of that type.
It also provides source paths for all properties directly owned or inherited
by the type, for non-simple cases (as described before, simple cases are encoded
in the fragment definition). Furthermore, if the value(s) of a property can be
encoded in the database in multiple ways - for example because of
multiplicity being flattened (like a property with max multiplicity 2),
and the property values thus being SQL encoded by multiple separate columns,
or because the property value type has subtypes, and each subtype is SQL encoded
in a separate table - the property is typically encoded (in the type definition)
as a FEATURE_REF using the ldproxy keyword <code>concat</code> or <code>coalesce</code>. The former is used
if the maximum multiplicity of the property is greater than one, the latter if it is
equal to one. Further details on the encoding of a FEATURE_REF are given <a href="#feature_ref">here</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following example is from one of the ShapeChange unit tests.
The ShapeChange configuration and results of that test are available <a href="https://github.com/ShapeChange/ShapeChange/tree/master/src/test/resources/ldproxy2/fragmentsConcatCoalesce">here</a>,
while the model is available
<a href="https://github.com/ShapeChange/ShapeChange/tree/master/src/test/resources/sql/sqlEncodingInfos">here</a>.
The example only shows an extract of the whole unit test.
</td>
</tr>
</table>
</div>
<div id="img_ldproxy2_inheritance_and_specialization_example" class="imageblock text-center">
<div class="content">
<img src="./../images/ldp2_inheritance_example.png" alt="ldp2 inheritance example">
</div>
<div class="title">Figure 1. Example schema with inheritance structures, to illustrate fragment encoding</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
</pre></td>
  <td class="code"><pre><span class="key">collections</span>:
  <span class="key">t8_class1</span>:
    <span class="key">sourcePath</span>: <span class="string"><span class="content">/t8_class1</span></span>
    <span class="key">type</span>: <span class="string"><span class="content">OBJECT</span></span>
    <span class="key">label</span>: <span class="string"><span class="content">T8_Class1</span></span>
    <span class="key">properties</span>:
      <span class="key">pMixA2Mult</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">[_id=t8_class1_id]t8_class1_pmixa2mult/pmixa2mult</span><span class="delimiter">&quot;</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">VALUE_ARRAY</span></span>
        <span class="key">valueType</span>: <span class="string"><span class="content">INTEGER</span></span>
      <span class="key">attC1Mult</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">[_id=t8_class1_id]t8_class1_attc1mult/attc1mult</span><span class="delimiter">&quot;</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">VALUE_ARRAY</span></span>
        <span class="key">valueType</span>: <span class="string"><span class="content">INTEGER</span></span>
      <span class="key">role1to2</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">[_id=t8_class1_id]t8_class1_role1to2_t8_class2sub/t8_class2sub_id</span><span class="delimiter">&quot;</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">FEATURE_REF_ARRAY</span></span>
        <span class="key">valueType</span>: <span class="string"><span class="content">INTEGER</span></span>
        <span class="key">refType</span>: <span class="string"><span class="content">t8_class2sub</span></span>
    <span class="key">schema</span>: <span class="string"><span class="content">'#/fragments/t8_class1'</span></span>
  <span class="key">t8_class1sub</span>:
    <span class="key">sourcePath</span>: <span class="string"><span class="content">/t8_class1sub</span></span>
    <span class="key">type</span>: <span class="string"><span class="content">OBJECT</span></span>
    <span class="key">label</span>: <span class="string"><span class="content">T8_Class1Sub</span></span>
    <span class="key">properties</span>:
      <span class="key">pMixA2Mult</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">[_id=t8_class1sub_id]t8_class1sub_pmixa2mult/pmixa2mult</span><span class="delimiter">&quot;</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">VALUE_ARRAY</span></span>
        <span class="key">valueType</span>: <span class="string"><span class="content">INTEGER</span></span>
      <span class="key">attC1Mult</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">[_id=t8_class1sub_id]t8_class1sub_attc1mult/attc1mult</span><span class="delimiter">&quot;</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">VALUE_ARRAY</span></span>
        <span class="key">valueType</span>: <span class="string"><span class="content">INTEGER</span></span>
      <span class="key">role1to2</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">[_id=t8_class1sub_id]t8_class1sub_role1to2_t8_class2sub/t8_class2sub_id</span><span class="delimiter">&quot;</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">FEATURE_REF_ARRAY</span></span>
        <span class="key">valueType</span>: <span class="string"><span class="content">INTEGER</span></span>
        <span class="key">refType</span>: <span class="string"><span class="content">t8_class2sub</span></span>
      <span class="key">attC1SubMult</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">[_id=t8_class1sub_id]t8_class1sub_attc1submult/attc1submult</span><span class="delimiter">&quot;</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">VALUE_ARRAY</span></span>
        <span class="key">valueType</span>: <span class="string"><span class="content">STRING</span></span>
    <span class="key">schema</span>: <span class="string"><span class="content">'#/fragments/t8_class1sub'</span></span>
  <span class="key">t8_class2sub</span>:
    <span class="key">sourcePath</span>: <span class="string"><span class="content">/t8_class2sub</span></span>
    <span class="key">type</span>: <span class="string"><span class="content">OBJECT</span></span>
    <span class="key">label</span>: <span class="string"><span class="content">T8_Class2Sub</span></span>
    <span class="key">properties</span>:
      <span class="key">role2to1</span>:
        <span class="key">type</span>: <span class="string"><span class="content">FEATURE_REF_ARRAY</span></span>
        <span class="key">concat</span>:
        - <span class="string"><span class="content">sourcePath: &quot;[_id=t8_class2sub_id]t8_class1_role1to2_t8_class2sub/t8_class1_id&quot;</span></span>
          <span class="key">type</span>: <span class="string"><span class="content">FEATURE_REF_ARRAY</span></span>
          <span class="key">valueType</span>: <span class="string"><span class="content">INTEGER</span></span>
          <span class="key">refType</span>: <span class="string"><span class="content">t8_class1</span></span>
        - <span class="string"><span class="content">sourcePath: &quot;[_id=t8_class2sub_id]t8_class1sub_role1to2_t8_class2sub/t8_class1sub_id&quot;</span></span>
          <span class="key">type</span>: <span class="string"><span class="content">FEATURE_REF_ARRAY</span></span>
          <span class="key">valueType</span>: <span class="string"><span class="content">INTEGER</span></span>
          <span class="key">refType</span>: <span class="string"><span class="content">t8_class1sub</span></span>
    <span class="key">schema</span>: <span class="string"><span class="content">'#/fragments/t8_class2sub'</span></span>
<span class="key">fragments</span>:
  <span class="key">t8_class1</span>:
    <span class="key">type</span>: <span class="string"><span class="content">OBJECT</span></span>
    <span class="key">objectType</span>: <span class="string"><span class="content">T8_Class1</span></span>
    <span class="key">label</span>: <span class="string"><span class="content">T8_Class1</span></span>
    <span class="key">properties</span>:
      <span class="key">oid</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="content">_id</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">INTEGER</span></span>
        <span class="key">role</span>: <span class="string"><span class="content">ID</span></span>
      <span class="key">attC1</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="content">attc1</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">INTEGER</span></span>
        <span class="key">label</span>: <span class="string"><span class="content">attC1</span></span>
        <span class="key">constraints</span>:
          <span class="key">required</span>: <span class="string"><span class="content">true</span></span>
      <span class="key">attC1Mult</span>:
        <span class="key">type</span>: <span class="string"><span class="content">VALUE_ARRAY</span></span>
        <span class="key">valueType</span>: <span class="string"><span class="content">INTEGER</span></span>
        <span class="key">label</span>: <span class="string"><span class="content">attC1Mult</span></span>
        <span class="key">constraints</span>:
          <span class="key">required</span>: <span class="string"><span class="content">true</span></span>
          <span class="key">minOccurrence</span>: <span class="string"><span class="content">1</span></span>
      <span class="key">role1to2</span>:
        <span class="key">type</span>: <span class="string"><span class="content">FEATURE_REF_ARRAY</span></span>
        <span class="key">label</span>: <span class="string"><span class="content">role1to2</span></span>
        <span class="key">constraints</span>:
          <span class="key">required</span>: <span class="string"><span class="content">true</span></span>
          <span class="key">minOccurrence</span>: <span class="string"><span class="content">1</span></span>
    <span class="key">schema</span>: <span class="string"><span class="content">'#/fragments/t8_mixin_b'</span></span>
  <span class="key">t8_class1sub</span>:
    <span class="key">type</span>: <span class="string"><span class="content">OBJECT</span></span>
    <span class="key">objectType</span>: <span class="string"><span class="content">T8_Class1Sub</span></span>
    <span class="key">label</span>: <span class="string"><span class="content">T8_Class1Sub</span></span>
    <span class="key">merge</span>:
    - <span class="string"><span class="content">schema: '#/fragments/t8_class1'</span></span>
    - <span class="string"><span class="content">schema: '#/fragments/t8_mixin_c'</span></span>
    - <span class="string"><span class="content">schema: '#/fragments/t8_mixin_d'</span></span>
    - <span class="string"><span class="content">properties:</span><span class="content">
        attC1Sub:
          sourcePath: attc1sub
          type: STRING
          label: attC1Sub
          constraints:
            required: true
        attC1SubMult:
          type: VALUE_ARRAY
          valueType: STRING
          label: attC1SubMult
          constraints:
            required: true
            minOccurrence: 1</span></span>
  <span class="key">t8_class2</span>:
    <span class="key">type</span>: <span class="string"><span class="content">OBJECT</span></span>
    <span class="key">objectType</span>: <span class="string"><span class="content">T8_Class2</span></span>
    <span class="key">label</span>: <span class="string"><span class="content">T8_Class2</span></span>
    <span class="key">properties</span>:
      <span class="key">oid</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="content">_id</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">INTEGER</span></span>
        <span class="key">role</span>: <span class="string"><span class="content">ID</span></span>
      <span class="key">attC2</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="content">attc2</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">FLOAT</span></span>
        <span class="key">label</span>: <span class="string"><span class="content">attC2</span></span>
        <span class="key">constraints</span>:
          <span class="key">required</span>: <span class="string"><span class="content">true</span></span>
      <span class="key">role2to1</span>:
        <span class="key">type</span>: <span class="string"><span class="content">FEATURE_REF_ARRAY</span></span>
        <span class="key">label</span>: <span class="string"><span class="content">role2to1</span></span>
        <span class="key">constraints</span>:
          <span class="key">minOccurrence</span>: <span class="string"><span class="content">0</span></span>
  <span class="key">t8_class2sub</span>:
    <span class="key">type</span>: <span class="string"><span class="content">OBJECT</span></span>
    <span class="key">objectType</span>: <span class="string"><span class="content">T8_Class2Sub</span></span>
    <span class="key">label</span>: <span class="string"><span class="content">T8_Class2Sub</span></span>
    <span class="key">properties</span>:
      <span class="key">attC2Sub</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="content">attc2sub</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">BOOLEAN</span></span>
        <span class="key">label</span>: <span class="string"><span class="content">attC2Sub</span></span>
        <span class="key">constraints</span>:
          <span class="key">required</span>: <span class="string"><span class="content">true</span></span>
    <span class="key">schema</span>: <span class="string"><span class="content">'#/fragments/t8_class2'</span></span>
  <span class="key">t8_mixin_a</span>:
    <span class="key">type</span>: <span class="string"><span class="content">OBJECT</span></span>
    <span class="key">objectType</span>: <span class="string"><span class="content">T8_Mixin_A</span></span>
    <span class="key">label</span>: <span class="string"><span class="content">T8_Mixin_A</span></span>
    <span class="key">properties</span>:
      <span class="key">pMixA1</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="content">pmixa1</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">INTEGER</span></span>
        <span class="key">label</span>: <span class="string"><span class="content">pMixA1</span></span>
        <span class="key">constraints</span>:
          <span class="key">required</span>: <span class="string"><span class="content">true</span></span>
      <span class="key">pMixA2</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="content">pmixa2</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">BOOLEAN</span></span>
        <span class="key">label</span>: <span class="string"><span class="content">pMixA2</span></span>
        <span class="key">constraints</span>:
          <span class="key">required</span>: <span class="string"><span class="content">true</span></span>
      <span class="key">pMixA2Mult</span>:
        <span class="key">type</span>: <span class="string"><span class="content">VALUE_ARRAY</span></span>
        <span class="key">valueType</span>: <span class="string"><span class="content">INTEGER</span></span>
        <span class="key">label</span>: <span class="string"><span class="content">pMixA2Mult</span></span>
        <span class="key">constraints</span>:
          <span class="key">required</span>: <span class="string"><span class="content">true</span></span>
          <span class="key">minOccurrence</span>: <span class="string"><span class="content">1</span></span>
  <span class="key">t8_mixin_b</span>:
    <span class="key">type</span>: <span class="string"><span class="content">OBJECT</span></span>
    <span class="key">objectType</span>: <span class="string"><span class="content">T8_Mixin_B</span></span>
    <span class="key">label</span>: <span class="string"><span class="content">T8_Mixin_B</span></span>
    <span class="key">properties</span>:
      <span class="key">pMixB</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="content">pmixb</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">FLOAT</span></span>
        <span class="key">label</span>: <span class="string"><span class="content">pMixB</span></span>
        <span class="key">constraints</span>:
          <span class="key">required</span>: <span class="string"><span class="content">true</span></span>
    <span class="key">schema</span>: <span class="string"><span class="content">'#/fragments/t8_mixin_a'</span></span>
  <span class="key">t8_mixin_c</span>:
    <span class="key">type</span>: <span class="string"><span class="content">OBJECT</span></span>
    <span class="key">objectType</span>: <span class="string"><span class="content">T8_Mixin_C</span></span>
    <span class="key">label</span>: <span class="string"><span class="content">T8_Mixin_C</span></span>
    <span class="key">properties</span>:
      <span class="key">pMixC</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="content">pmixc</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">STRING</span></span>
        <span class="key">label</span>: <span class="string"><span class="content">pMixC</span></span>
        <span class="key">constraints</span>:
          <span class="key">required</span>: <span class="string"><span class="content">true</span></span>
  <span class="key">t8_mixin_d</span>:
    <span class="key">type</span>: <span class="string"><span class="content">OBJECT</span></span>
    <span class="key">objectType</span>: <span class="string"><span class="content">T8_Mixin_D</span></span>
    <span class="key">label</span>: <span class="string"><span class="content">T8_Mixin_D</span></span>
    <span class="key">properties</span>:
      <span class="key">pMixD</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="content">pmixd</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">INTEGER</span></span>
        <span class="key">label</span>: <span class="string"><span class="content">pMixD</span></span>
        <span class="key">constraints</span>:
          <span class="key">required</span>: <span class="string"><span class="content">true</span></span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div id="ldproxy2_sql_encoding_infos" class="paragraph">
<p>The representation of certain model elements in the underlying database
can vary significantly. It is therefore highly recommended to
provide the ldproxy target with
<a href="./SQL_DDL.html#SQL_Encoding_Infos">SQL encoding infos</a> (available since v2.14.0).
They can be produced by the SQL DDL target. The encoding infos can be
provided via the <code>advancedProcessConfigurations</code> element of the ldproxy target configuration.
The following example shows how that can be done:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre><span class="tag">&lt;Target</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">de.interactive_instruments.ShapeChange.Target.Ldproxy2.Ldproxy2Target</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">mode</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">enabled</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">inputs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TRF_END</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;advancedProcessConfigurations&gt;</span>
    <span class="tag">&lt;xi:include</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./config/SqlEncodingInfos.xml</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="comment">&lt;!-- ... --&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The ShapeChange workflow may need to be
run twice - first, to generate the database schema and the SQL encoding infos,
and then to derive the ldproxy configuration files, using the SQL encoding infos
in the configuration of the ldproxy target.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>advancedProcessConfigurations</code> element may contain multiple includes,
for example one for the SQL encoding infos, and one for the XML encoding infos.
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
Only provide SQL encoding infos that match the underlying database schema!
If additional SQL encoding infos are provided for schema elements, with tables and
source paths that simply do not exist in the database schema, the resulting ldproxy
configuration may be incorrect. Concat or coalesce members may have been created
erroneously. A use case where this is important is profiling: if multiple profiles
are created for the same application schema, and an individual database schema is
created for each profile, then do NOT configure a single ldproxy target with the
according profile models as inputs, and the SQL encoding info XML files from all profiles
included in that target configuration! Instead, configure one ldproxy target for
each profile - only including the SQL encoding infos generated for the corresponding
database schema.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_types_database_table_names"><a class="anchor" href="#ldproxy2_schemaconversionrules_types_database_table_names"></a>2.4.4. Database Table Name</h4>
<div class="paragraph">
<p>Whenever a type from the application schema is encoded within an ldproxy provider configuration, the name of the database table that represents that type is required (especially for constructing source paths).</p>
</div>
<div class="paragraph">
<p>The name of the database table is determined as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <a href="#ldproxy2_sql_encoding_infos">SQL encoding infos</a> are configured, the target looks
up the table name there.</p>
</li>
<li>
<p>Otherwise, the target constructs a table name itself:</p>
<div class="ulist">
<ul>
<li>
<p>Basically, the type name is used as table name.</p>
</li>
<li>
<p>A suffix can be added to the table name, depending upon the conversion context:</p>
<div class="ulist">
<ul>
<li>
<p>If the name is used as column name within an associative table (typically for n-to-m relationships), which does NOT represent a reflexive relationship, then the value of target parameter <em>associativeTableColumnSuffix</em> (with default value being the value of target parameter <em>primaryKeyColumn</em>) is used as suffix.</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: This supports behavior of the SqlDdl target regarding the construction of associative tables.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>In addition, the table name established so far is converted to lower case (using the english locale).</p>
</li>
<li>
<p>Finally, the table name is restricted to a substring (starting at the beginning of the name) whose length does not exceed the value of target parameter <em>maxNameLength</em> (whose default value is 63 [characters]).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>In the future, conversion rules can be defined to modify the default naming behavior.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_types_featureandobjecttype"><a class="anchor" href="#ldproxy2_schemaconversionrules_types_featureandobjecttype"></a>2.4.5. Feature and Object Type</h4>
<div class="paragraph">
<p>In the conceptual model, feature and object types represent objects that have identity. That differentiates these types from, for example, data types. Other than that, feature and object types - in the following called <em>types with identity</em> - are encoded as top-level <a href="#ldproxy2_schemaconversionrules_types_featureandobjecttype_providertype">type (and potentially also fragment) definitions within the provider configuration</a> as well as <a href="#ldproxy2_schemaconversionrules_types_featureandobjecttype_servicecollection">collection definitions in the service configuration</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
A feature type typically has stereotype &lt;&lt;featuretype&gt;&gt;, while an object type has stereotype &lt;&lt;type&gt;&gt;, &lt;&lt;interface&gt;&gt;, or no stereotype.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If a map entry is defined for the type, it is not encoded in the provider configuration.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
A future enhancement of the ldproxy target could introduce mechanisms for suppressing the global type definition within a provider configuration for a type with identity, instead inlining this definition whenever the type is used as property value type. Examples would be BuildingPart (which could be inlined into Building), as well as subtypes of INSPIRE AddressComponent (which could be inlined into Address).
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="ldproxy2_schemaconversionrules_types_featureandobjecttype_providertype"><a class="anchor" href="#ldproxy2_schemaconversionrules_types_featureandobjecttype_providertype"></a>2.4.5.1. Provider Type Definition</h5>
<div class="paragraph">
<p>The name of the definition is the class name. The name can be formatted, as defined by
target parameter <em>collectionIdFormat</em> (default value is 'lowerCase'). Supported parameter
values are:</p>
</div>
<div id="collectionIdFormat" class="ulist">
<ul>
<li>
<p>none - no formatting is applied; can be useful for the <a href="#ldproxy2_schemaconversionrules_specificrules_coretable">Coretable Approach</a>.</p>
</li>
<li>
<p>lowerCase - The name is converted to lower case, using the English locale.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
ISO 19109 requires class names to be unique within the scope of a single application schema. Although not recommended, different schemas may define types with same name. The ldproxy target will log an error if it encounters multiple classes (from the schemas selected for processing) that have equal name (ignoring case) and which shall be encoded by the target.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following information items are encoded within the provider configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>type: OBJECT</p>
</li>
<li>
<p>objectType: original name of the type (taken from tagged value <em>originalClassName</em>, if present, otherwise it is the class name as found in the - potentially transformed and thus altered - model)</p>
</li>
<li>
<p>sourcePath: "/" + {<a href="#ldproxy2_schemaconversionrules_types_database_table_names">table_name</a>}</p>
</li>
<li>
<p>label: value as derived using the <em>labelTemplate</em> (see the <a href="#ldproxy2_schemaconversionrules_documentation">documentation</a> section for further details)</p>
</li>
<li>
<p>description: value as derived using the <em>descriptionTemplate</em> (see the <a href="#ldproxy2_schemaconversionrules_documentation">documentation</a> section for further details)</p>
</li>
<li>
<p>properties: as documented in section <a href="#ldproxy2_schemaconversionrules_properties">Properties</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If target parameter <em>enableFragments</em> is set to <code>true</code>, type AND fragment
definitions are encoded. For further details, see section <a href="#ldproxy2_schemaconversionrules_schemapackage_providerconfig">Provider Configuration</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="ldproxy2_schemaconversionrules_types_featureandobjecttype_servicecollection"><a class="anchor" href="#ldproxy2_schemaconversionrules_types_featureandobjecttype_servicecollection"></a>2.4.5.2. Service Collection Definition</h5>
<div class="paragraph">
<p>The name of the collection definition is the class name, formatted according to
target parameter <a href="#collectionIdFormat">[collectionIdFormat]</a>. It is therefore equal to the name of
the provider type definition.</p>
</div>
<div class="paragraph">
<p>The following information items are encoded for the collection definition within the service configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>id: the collection name</p>
</li>
<li>
<p>label: same as id</p>
</li>
<li>
<p>api:</p>
<div class="ulist">
<ul>
<li>
<p>-buildingBlock: FEATURES_HTML</p>
<div class="ulist">
<ul>
<li>
<p>featureTitleTemplate: value of tag <em>ldpFeatureTitleTemplate</em> on the class; no default is defined. The value must define a template with one or more property names from the ldproxy configuration (e.g. <code>{{title}}</code>).</p>
</li>
<li>
<p>transformations: an object with members depending upon the conversion of the type properties and their value types (see sections <a href="#ldproxy2_schemaconversionrules_types_enumeration_and_codelist">Enumeration and Code List</a> and  <a href="#ldproxy2_schemaconversionrules_properties_serviceconfig_featureshtml_transformations">Features HTML API-Module, Property Transformations</a>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Currently, specific API conversion behavior is only defined for the Features HTML API-Module. In the future, the definition of queryables and sortables can be added.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="ldproxy2_schemaconversionrules_types_featureandobjecttype_identifier"><a class="anchor" href="#ldproxy2_schemaconversionrules_types_featureandobjecttype_identifier"></a>2.4.5.3. Identifier member</h5>
<div class="paragraph">
<p>The conceptual model of a type with identity often does not contain a property whose value is used by applications to identify objects of that type. Instead, the according information is added or defined in platform specific encodings. For example, a GML application schema offers the gml:id attribute as well as the gml:identifier element to encode identifying information.</p>
</div>
<div class="paragraph">
<p>In ldproxy, each provider type definition must have a property that functions as object identifier.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <em>rule-ldp2-cls-identifierStereotype</em> applies to the type, and the type - or one of its supertypes -
has an &lt;&lt;identifier&gt;&gt; property, then that property will be encoded as such an object identifier.</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: If the maximum multiplicity of an &lt;&lt;identifier&gt;&gt; attribute is greater than 1, an error will be logged. Processing will continue, assuming a maximum multiplicity of 1 for the attribute.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Otherwise, an identifier member is explicitly encoded. The member name is given by target parameter <em>objectIdentifierName</em> (default: "oid"). The value of the sourcePath is the value of target parameter <em>primaryKeyColumn</em> with <code>type</code> INTEGER.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The object identifier property will receive member <code>role</code> with value ID.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If a type has multiple identifier properties (directly owned and/or inherited),
none of them is used as object identifier (because no informed choice can be made).
An error will be logged. The target will create an identifier member.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="ldproxy2_schemaconversionrules_types_primarygeometry"><a class="anchor" href="#ldproxy2_schemaconversionrules_types_primarygeometry"></a>2.4.5.4. Primary Geometry</h5>
<div class="paragraph">
<p>If a type with identity has multiple geometry properties, one of them must be designated as primary geometry in order for ldproxy to a) use this geometry for bbox-queries, and to b) encode this property within the GeoJSON <em>geometry</em> or the JSON-FG <em>where</em> member.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Relevant geometry properties must directly be defined by the type with identity (or one of its supertypes).
In other words, the target does not look at geometry properties in inlined (data) types when searching for the primary geometry.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If the type only has a single geometry property, ldproxy automatically deduces that it is the primary geometry.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The property that contains the primary geometry is identified by setting tagged value <em>defaultGeometry</em> on the property to the value <code>true</code>. If multiple such properties exist, none of them is selected as primary geometry (because no informed choice can be made) and an error will be logged.</p>
</div>
<div class="paragraph">
<p>The primary geometry property is encoded with <code>role: PRIMARY_GEOMETRY</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If the primary geometry property has a maximum multiplicity greater than 1, then ShapeChange will log a warning and assume a maximum multiplicity of exactly 1.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Additional geometry properties are encoded like all other UML properties.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The ldproxy target expects all geometry properties to have a maximum multiplicity of exactly 1. That is because ldproxy supports multi-geometry types (e.g. MULTI_POINT and GEOMETRY_COLLECTION), which are typically used in implementations that rely upon the <a href="https://www.ogc.org/standards/sfa">Simple Feature Access standard</a> (such as spatial databases which typically implement the <a href="https://www.ogc.org/standards/sfs">Simple Feature Access - Part 2: SQL Option</a>), but does not define a transformation of a geometry property with max multiplicity greater than 1 to such a multi-geometry type. An according model transformation could be defined and implemented in ShapeChange as a future enhancement. In any case: If the ldproxy target encounters a geometry property with maximum multiplicity greater than 1, it logs an error and continues processing, assuming a maximum multiplicity of exactly 1.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="ldproxy2_schemaconversionrules_types_primarytemporalproperties"><a class="anchor" href="#ldproxy2_schemaconversionrules_types_primarytemporalproperties"></a>2.4.5.5. Primary Temporal Properties</h5>
<div class="paragraph">
<p>If a type with identity has multiple temporal properties, i.e. properties whose type is mapped to DATE or DATETIME, then the ldproxy target looks for tagged values <em>defaultInstant</em>, <em>defaultIntervalStart</em>, and <em>defaultIntervalEnd</em> with value <code>true</code> on these properties, in order to determine whether one of them defines the temporal extent of the type.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use of <em>defaultInstant</em> and <em>defaultIntervalStart</em> / <em>defaultIntervalEnd</em> are mutually exclusive. If <em>defaultInstant</em> is <code>true</code> on one of these properties, then the other tags must not be <code>true</code>, and vice-versa. An error will be logged if that is not the case.</p>
</li>
<li>
<p>If <em>defaultInstant</em> is <code>true</code> on one property, then the according property will be encoded with <code>role: PRIMARY_INSTANT</code>. If more than one such property was found, an error will be logged.</p>
</li>
<li>
<p>If <em>defaultIntervalStart</em> is <code>true</code> on one property, then the according property will be encoded with <code>role: PRIMARY_INTERVAL_START</code>. If more than one such property was found, an error will be logged.</p>
</li>
<li>
<p>If <em>defaultIntervalEnd</em> is <code>true</code> on one property, then the according property will be encoded with <code>role: PRIMARY_INTERVAL_END</code>. If more than one such property was found, an error will be logged.</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
If none of the temporal properties of the type with identity is marked as PRIMARY_INSTANT, PRIMARY_INTERVAL_START, or PRIMARY_INTERVAL_END, then the first temporal property (following the order in which the properties are encoded in the provider type definition) will automatically be marked as PRIMARY_INSTANT. This reflects the behavior of ldproxy. If this is not desirable for a given type, then define which of the temporal properties should be used as primary instant or interval start / end.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The search for temporal properties that define primary instant / interval is performed on top-level properties only. I.e., properties of inlined (data) types are not considered by this search.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The ldproxy target expects all default temporal properties to have a maximum multiplicity of exactly 1. If a default temporal property with maximum multiplicity greater than 1 is encountered, the target logs an error and continues processing, assuming a maximum multiplicity of exactly 1.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
A property with value type TM_Period cannot directly be used for the definition of the temporal extent of a feature, at least not with this ShapeChange target, since ldproxy expects the information of a temporal interval to be given via two separate time instants (the interval start and end). In the future, a ShapeChange transformation could be added, to convert a property with value type TM_Period (and some indicator that the property defines the temporal extent of a type with identity) to two properties, with value type TM_Instant, and with the tags <em>defaultIntervalStart</em> / <em>defaultIntervalEnd</em>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Additional temporal properties are encoded like all other UML properties.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_types_datatype"><a class="anchor" href="#ldproxy2_schemaconversionrules_types_datatype"></a>2.4.6. Data Type</h4>
<div class="paragraph">
<p>By default, a &lt;&lt;dataType&gt;&gt; is not converted to a top-level provider type definition. Instead,
the data type will be encoded as a fragment definition (if fragments are enabled,
i.e. target parameter <em>enableFragments</em> = <code>true</code>), and the type definition for the
data type is encoded whenever a property, whose value type is the data type, is encoded.</p>
</div>
<div class="paragraph">
<p>The following information items are encoded for the type definition of the &lt;&lt;dataType&gt;&gt;:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>type: OBJECT or OBJECT_ARRAY (depending on the multiplicity; for further details, see <a href="#ldproxy2_schemaconversionrules_properties_propertytype">Property Type</a>)</p>
</li>
<li>
<p>objectType: original name of the data type (taken from tagged value <em>originalClassName</em>, if present, otherwise it is the class name as found in the - potentially transformed and thus altered - model)</p>
</li>
<li>
<p>sourcePath: as determined from configured <a href="#ldproxy2_sql_encoding_infos">SQL encoding infos</a>,
or as defined for data type valued properties in section <a href="#ldproxy2_schemaconversionrules_properties_sourcepaths">Source Paths</a></p>
</li>
<li>
<p>In fragment definitions:</p>
<div class="ulist">
<ul>
<li>
<p>label: value as derived using the <em>labelTemplate</em> (see the <a href="#ldproxy2_schemaconversionrules_documentation">documentation</a> section for further details)</p>
</li>
<li>
<p>description: value as derived using the <em>descriptionTemplate</em> (see the <a href="#ldproxy2_schemaconversionrules_documentation">documentation</a> section for further details)</p>
</li>
</ul>
</div>
</li>
<li>
<p>properties: as documented in section <a href="#ldproxy2_schemaconversionrules_properties">Properties</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Although not recommended, data types can have circular dependencies on each other. The ldproxy target does not support such dependencies (because it can lead to an infinite loop of inlined data type definitions). If a circular dependency is detected by the target, it will report an error - and not encode the property that would cause this circular dependency.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_types_mixin"><a class="anchor" href="#ldproxy2_schemaconversionrules_types_mixin"></a>2.4.7. Mixin Type</h4>
<div class="paragraph">
<p>Since v2.14.0, mixins are supported, if target parameter <em>enableFragments</em> is set to <code>true</code>.
For further details, see section <a href="#ldproxy2_schemaconversionrules_types_inheritance_and_specialization">Inheritance and Specialization</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
ShapeChange supports the notion of mixin type (for further details, see <a href="../targets/xml schema/Support_for_Mixin_Classes.html">Support for Mixin Classes</a>). They are primarily used by the XML Schema target and were meant to support multiple inheritance in an encoding for an implementation technology that does not support multiple inheritance - such as XML Schema.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_types_union"><a class="anchor" href="#ldproxy2_schemaconversionrules_types_union"></a>2.4.8. Union</h4>
<div class="paragraph">
<p>Conversion of unions is not supported by the ldproxy target.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can transform unions, either flattening them (using the <a href="../transformations/Flattener.html#rule-trf-prop-flatten-types">Flattener rule-trf-prop-flatten-types</a>), or by mapping them (using the <a href="../transformations/Type_Converter.html#rule-trf-switchValueTypes">Type Converter rule-trf-switchValueTypes</a>, or a map entry defined in the ldproxy target).
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_types_enumeration_and_codelist"><a class="anchor" href="#ldproxy2_schemaconversionrules_types_enumeration_and_codelist"></a>2.4.9. Enumeration and Code List</h4>
<div class="paragraph">
<p>Enumerations and code lists are not converted to top-level provider type definitions. Each &lt;&lt;enumeration&gt;&gt; / &lt;&lt;codelist&gt;&gt; that a) is not mapped, b) is not marked to not be encoded, and c) belongs to the schemas selected for processing, is converted to a {id}.yml file in the data/store/entities/codelists folder. The ldproxy target thus also converts enumerations to ldproxy code lists. The ID thereby is the enumeration / code list name, with all non-word characters replaced by '_'.</p>
</div>
<div class="paragraph">
<p>The following information items are encoded within the YAML file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>id: the enumeration / code list ID</p>
</li>
<li>
<p>label: value as derived using the <em>labelTemplate</em> (see the <a href="#ldproxy2_schemaconversionrules_documentation">documentation</a> section for further details)</p>
</li>
<li>
<p>sourceType: TEMPLATES</p>
</li>
<li>
<p>entries: One entry <code>{code}: {target_value}</code> per enum / code defined by the enumeration / code list</p>
<div class="ulist">
<ul>
<li>
<p>An enum / code is represented by an attribute in the UML model.</p>
</li>
<li>
<p>If <em>rule-ldp2-cls-codelist-direct</em> applies, then the {code} value is the initial value, and the {target_value} is the enum / code name.</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: The ldproxy target will log a warning if a code/enum has no initial value, and proceed by using the enum / code name as {code} value.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If <em>rule-ldp2-cls-codelist-targetbytaggedvalue</em> applies, then the {code} value is the initial value, if defined, otherwise it is the enum / code name, and the {target_value} is given by tagged value <em>ldpCodeTargetValue</em> on the enum / code attribute.</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: The name of the tag can be configured using target parameter <em>codeTargetTagName</em> (having default value <em>ldpCodeTargetValue</em>). If you choose a different tag name, and that name is not one of the well-known tag names (as listed <a href="../application schemas/UML_profile.html#Tagged_Values">here</a>), make sure that you set input parameter <a href="../get started/The_element_input.html#addTaggedValues">addTaggedValues</a> with either the tag name or value <code>*</code>. If the tag is used as alias in a <a href="../get started/The_element_input.html#Tag_aliases">tag mapping</a>, and thus mapped to a different tag name, either remove that mapping or choose a different tag.</p>
</li>
<li>
<p>NOTE: The ldproxy target will log a warning if a code/enum has a blank value for the tag, and proceed by using the enum / code name as {target_value}.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Otherwise, i.e. neither of the two conversion rules applies, the ldproxy target will encode both {code} and {target_value} with the name of the enum / code. So this will result in a one to one mapping of the enum / code.</p>
</li>
<li>
<p>The resulting {target_value} can be modified:</p>
<div class="ulist">
<ul>
<li>
<p>If <em>rule-ldp2-cls-codelist-append-code</em> applies to the enumeration or code list, then the following suffix is appended to the {target_value}: Â´' (' + {code} + ')'Â´. For example, if {code} = Â´1000Â´ and {target_value} = Â´ABCÂ´, then the new {target_value} will be Â´ABC (1000)Â´. This addition can be useful for constructing queries, since a query for code value Â´ABCÂ´ would in fact have to be written as a query with value Â´1000Â´. The suffix of the {target_value} then shows which value needs to be used in a query.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>fallback: The value is given by tagged value <em>ldpFallbackValue</em> on the enumeration / code list. If the tagged value is blank (missing or empty), then the fallback is omitted. NOTE: The fallback value will be used (as-is) by ldproxy if a value stored in the database does not match any of the entries defined in the ldproxy code list (which can happen if a code list has evolved since the ldproxy code list has been created). An example for a fallback value would be 'unknown'.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If both <em>rule-ldp2-cls-codelist-direct</em> and <em>rule-ldp2-cls-codelist-targetbytaggedvalue</em> apply to a code list / enumeration, then <em>rule-ldp2-cls-codelist-direct</em> is chosen.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p><em>rule-ldp2-cls-codelist-targetbytaggedvalue</em> is useful in combination with model transformations that populate a code list, e.g. by retrieving the code list definition from some registry. Since the target value of an entity within an ldproxy hosted code list can be all sorts of things - from human readable text, over URL, to some Markdown expression - it is better to rely on model transformations to create the <em>ldpCodeTargetValue</em> tagged value as required for a given API deployment. Such model transformations are future work.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In addition, whenever a property, whose value type is the enumeration / code list, information is added both to the provider and the service configurations.</p>
</div>
<div class="paragraph">
<p>The following information items are added to the property encoding in the provider configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>type: default is STRING; if tagged value <em>numericType</em> on the enumeration / code list is not blank, then the type results by mapping the type name given by the tagged value.</p>
</li>
<li>
<p>codelist constraint: the codelist ID</p>
</li>
<li>
<p>If <em>rule-ldp2-cls-enumeration-enum-constraint</em> applies to an enumeration, an enum constraint is added. If the enums have initial values, these are used within the constraint - otherwise, the enum names are used.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If the enumeration / code list itself is not encoded, is mapped, or does not belong to the schemas selected for processing, ShapeChange will log a warning, informing the user that this situation is an issue unless an ldproxy codelist with corresponding ID has already been or will be established for the desired deployment by other means (e.g. by manually creating it).
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Depending upon the use case, it may or may not be useful to convert enumerations to code lists before executing the ldproxy target, using the <a href="../transformations/Type_Converter.html#rule-trf-enumeration-to-codelist">Type Converter rule-trf-enumeration-to-codelist</a>. An advantage would be that transformations that apply to code lists could then also be applied to enumerations. A disadvantage would be that <em>rule-ldp2-cls-enumeration-enum-constraint</em> would then no longer be applied, since the types that have originally been enumerations would then be code lists.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following information is added to the collection definition (within the service configuration) of the global type in which the UML property is encoded, API building block FEATURES_HTML, member <code>transformations</code>: a member whose name is the '.'-concatenated path to the property within the type definition. The value of the new member is an object, to which a <code>codelist</code> member is added, with value being the ID of the enumeration / code list.</p>
</div>
<div id="example_ldproxy2_schemaconversionrules_types_enumeration_and_codelist_serviceconfig_featureshtml_codelist_transformation" class="listingblock">
<div class="title">Listing 1. Addition of codelist transformations for properties in the service configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="YAML"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre><span class="key">collections</span>:
  <span class="key">classxyz</span>:
    <span class="key">api</span>:
    - <span class="string"><span class="content">buildingBlock: FEATURES_HTML</span></span>
      <span class="key">transformations</span>:
        <span class="key">propertya.propertyb.propertyc</span>:
          <span class="key">codelist</span>: <span class="string"><span class="content">MyEnumeration</span></span>
        <span class="key">propertyd</span>:
          <span class="key">codelist</span>: <span class="string"><span class="content">MyCodelist</span></span></pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_types_basictype"><a class="anchor" href="#ldproxy2_schemaconversionrules_types_basictype"></a>2.4.10. Basic Type</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The ldproxy target does not support the conversion of basic types yet. This section describes how a conversion could look like.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If a direct or indirect supertype of an application schema class is mapped to one of the simple types FLOAT, INTEGER, STRING, BOOLEAN, DATETIME, or DATE, then the class would represent a so called <em>basic type</em>.</p>
</div>
<div class="paragraph">
<p>A basic type does not define an object. It represents a simple data value, e.g. a string. The ldproxy encoding of a basic type would just use the simple type to which the direct or indirect supertype is mapped.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In the future, ways to convert restrictions defined by basic types could be defined, using the <em>constraints</em> member (with enum, min, max, or regex). Constraints supported by ldproxy are documented <a href="https://docs.ldproxy.net/providers/details/constraints.html">here</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ldproxy2_schemaconversionrules_properties"><a class="anchor" href="#ldproxy2_schemaconversionrules_properties"></a>2.5. Properties</h3>
<div class="paragraph">
<p>The following sections describe how a property from a type with identity, mixin, or data type is converted by the ldproxy target.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The order in which the properties are encoded in the provider definition(s) is defined by the <em>sequenceNumber</em> tagged values of these properties.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The conversion of properties from other kinds of classifiers, especially enumerations and code lists, is described in the according subsections of the <a href="#ldproxy2_schemaconversionrules_types">Types</a> section.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_properties_sourcepaths"><a class="anchor" href="#ldproxy2_schemaconversionrules_properties_sourcepaths"></a>2.5.1. Source Paths</h4>
<div class="paragraph">
<p>The type definition within an ldproxy feature provider configuration (including any fragment definitions) describes the full encoding of a particular object type. Inlined property values can lead to a complex structure, especially when the type of a property is a complex &lt;&lt;dataType&gt;&gt;. In order to extract the values for populating the information items of an actual object, ldproxy needs to know the so called source paths. Such a path starts with the name of a database table at the top-level provider type definition. For the properties within a given type definition, the source path construction then depends on the actual representation of the property and its value type within the database.</p>
</div>
<div class="paragraph">
<p>The target first tries to look up the source path for a given property in
configured <a href="#ldproxy2_sql_encoding_infos">SQL encoding infos</a>.
If no encoding infos are available, the target constructs the path itself.
A crucial aspect thereby is the name of the table column that represents the
property in the database. Section <a href="#ldproxy2_schemaconversionrules_properties_sourcepaths_columnname">Database Column Name</a> defines how that name is constructed by the target. With the column name, a statement can be created to access the value(s) of the property. That statement may include table joins. The necessary conversion behavior is defined in section <a href="#ldproxy2_schemaconversionrules_properties_sourcepaths_accesspropertyvalues">Accessing Property Values</a>.</p>
</div>
<div class="sect4">
<h5 id="ldproxy2_schemaconversionrules_properties_sourcepaths_columnname"><a class="anchor" href="#ldproxy2_schemaconversionrules_properties_sourcepaths_columnname"></a>2.5.1.1. Database Column Name</h5>
<div class="paragraph">
<p>Whenever a property from the application schema is encoded within an ldproxy provider configuration, the name of the database column that represents that property is required for constructing source paths.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The target will first attempt to identify the source path from <a href="#ldproxy2_sql_encoding_infos">SQL encoding infos</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The name is determined as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Basically, the property name is used as column name.</p>
</li>
<li>
<p>A suffix can be added to the column name, depending upon the property value type:</p>
<div class="ulist">
<ul>
<li>
<p>If the value type is not mapped to or implemented as an ldproxy simple or geometry type, and is a:</p>
<div class="ulist">
<ul>
<li>
<p>type with identity (i.e. feature or object type), and:</p>
<div class="ulist">
<ul>
<li>
<p>the property belongs to a reflexive association, and the column belongs to an associative table, then the value of target parameter <em>associativeTableColumnSuffix</em> (with default value being the value of target parameter <em>primaryKeyColumn</em>) is used as suffix;</p>
</li>
<li>
<p>otherwise, if the property belongs to a reflexive association, and target parameter <em>reflexiveRelationshipFieldSuffix</em> has a non-blank value (with default being the empty string), then that value is used as suffix;</p>
</li>
<li>
<p>otherwise, the value of target parameter <em>foreignKeyColumnSuffix</em> (with default value being the empty string) is used as suffix</p>
</li>
</ul>
</div>
</li>
<li>
<p>data type, then the value of target parameter <em>foreignKeyColumnSuffixDatatype</em> (with default value being the empty string) is used as suffix</p>
</li>
</ul>
</div>
</li>
<li>
<p>Otherwise, if the value type is a code list (which is typically mapped to or implemented as an ldproxy simple type), and the code list matches <em>rule-ldp2-cls-codelist-byTable</em> (indicating that the code list is represented in the SQL database by a table), then the value of target parameter <em>foreignKeyColumnSuffixCodelist</em> (with default value being the empty string) is used as suffix.</p>
</li>
</ul>
</div>
</li>
<li>
<p>In addition, the column name established so far is converted to lower case (using the english locale).</p>
</li>
<li>
<p>Finally, the column name is restricted to a substring (starting at the beginning of the name) whose length does not exceed the value of target parameter <em>maxNameLength</em> (whose default value is 63 [characters]).</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>In the future, conversion rules can be defined to modify the default naming behavior.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="ldproxy2_schemaconversionrules_properties_sourcepaths_accesspropertyvalues"><a class="anchor" href="#ldproxy2_schemaconversionrules_properties_sourcepaths_accesspropertyvalues"></a>2.5.1.2. Accessing Property Values</h5>
<div class="paragraph">
<p>Constructing the source path within a property definition for accessing the property value(s) must consider the type of relationship between the property and its value type, the category of the property value type, the representation of the property value(s) in the database, and type mappings defined in the configuration.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Since v2.14.0, the target first attempts to look up the source path
for a property in the <a href="#ldproxy2_sql_encoding_infos">SQL encoding infos</a>,
taking into account the current encoding context (especially the table that
represents the type for which the property is encoded). If no source
path was found that way, the target constructs a source path itself,
as described in this section.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If the property value type is mapped to a simple type or a geometry type, or if the value type is an enumeration or code list (that does NOT match <em>rule-ldp2-cls-codelist-byTable</em>), source paths are constructed as shown in <a href="#img_ldproxy2_property_access_simpletypes_default">Figure 2</a>.</p>
</div>
<div id="img_ldproxy2_property_access_simpletypes_default" class="imageblock text-center">
<div class="content">
<img src="./../images/ldp2_simple_types_default_source_path_encoding.png" alt="ldp2 simple types default source path encoding">
</div>
<div class="title">Figure 2. Default source path construction for value types that are mapped to simple and geometry types</div>
</div>
<div class="paragraph">
<p>The abbreviations used in <a href="#img_ldproxy2_property_access_simpletypes_default">Figure 2</a> (as well as in the following figures) thereby mean the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{pk_col_A}</code> - Primary key column in the table that represents type A. The primary key column is defined (in descending order of priority):</p>
<div class="ulist">
<ul>
<li>
<p>via the &lt;&lt;identifier&gt;&gt; property of type A (as described <a href="#ldproxy2_schemaconversionrules_types_featureandobjecttype_identifier">here</a>), or</p>
</li>
<li>
<p>as the value of target parameter <em>primaryKeyColumn</em></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>{A_table_name}</code> - Table name for type A, as defined in section  <a href="#ldproxy2_schemaconversionrules_types_database_table_names">Database Table Name</a>.</p>
</li>
<li>
<p><code>{pX_col}</code> - The name of the column that represents the property pX, as defined in section <a href="#ldproxy2_schemaconversionrules_properties_sourcepaths_columnname">Database Column Name</a>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If defined at all, tag <em>associativeTable</em> is typically found on an attribute or an association.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
By default, the SqlDdl target encodes associative tables without a
separate primary key column. Instead, the primary key is a combination of
multiple columns (e.g. the two columns in a table which represents a 1:n relationship for a property with a value type that is mapped to a simple
type). When addressing such tables with a source path, a sort key must
explicitly be stated, since the default sort key (stated in the <code>sourcePathDefaults</code> of the provider configuration) does not apply there. However, if these
tables are encoded by the SqlDdl target with <em>rule-sql-all-associativeTablesWithSeparatePkField</em>,
then the combined primary key in these associative tables is replaced by
a separate primary key field, whose name is the value of SqlDdl target
parameter <em>idColumnName</em>. As stated in section <a href="#ldproxy2_schemaconversionrules_schemapackage_providerconfig">Provider Configuration</a>,
that parameter value corresponds to the ldproxy target parameter <em>primaryKeyColumn</em>,
which is also the default sort key (in <code>sourcePathDefaults</code>). Thus, with such
a structure for associative tables, there is no need to explicitly define
the sort key within the source path. To inform the ldproxy target that
associative tables always have a separate primary key column, add <em>rule-ldp2-all-associativeTablesWithSeparatePkField</em>
to the encoding rule.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Otherwise, if the property value type is a code list that does match <em>rule-ldp2-cls-codelist-byTable</em>, the target assumes that the code list is represented in the SQL database by a table. In that case, source paths are constructed as shown in <a href="#img_ldproxy2_property_access_codelist_bytable">Figure 3</a>.</p>
</div>
<div id="img_ldproxy2_property_access_codelist_bytable" class="imageblock text-center">
<div class="content">
<img src="./../images/ldp2_codelist_bytable_source_path_encoding.png" alt="ldp2 codelist bytable source path encoding">
</div>
<div class="title">Figure 3. Source path construction for code list value types that match <em>rule-ldp2-cls-codelist-byTable</em></div>
</div>
<div class="paragraph">
<p>Otherwise, if the property value type is mapped to LINK, the target assumes that the property representation in the database is an identifier, with which a reference to the actual object can be constructed. That reference will be encoded as a link-object (for further details, see section <a href="#ldproxy2_schemaconversionrules_properties_propertytype">Property Type</a>). If the maximum multiplicity is greater than 1, the target assumes that an associative table exists in the database. Source paths are then constructed as shown in <a href="#img_ldproxy2_property_access_mapped_types_default">Figure 4</a>.</p>
</div>
<div id="img_ldproxy2_property_access_mapped_types_default" class="imageblock text-center">
<div class="content">
<img src="./../images/ldp2_mapped_types_default_source_path_encoding.png" alt="ldp2 mapped types default source path encoding">
</div>
<div class="title">Figure 4. Default source path construction for value types that are mapped to LINK</div>
</div>
<div class="paragraph">
<p>Otherwise, if the property value type is a data type, and:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the data type matches <em>rule-ldp2-cls-data-types-oneToMany-severalTables</em>, then source paths are constructed as shown in <a href="#img_ldproxy2_property_access_datatypes_onetomany_severaltables">Figure 5</a>;</p>
</li>
<li>
<p>otherwise, source paths are constructed as shown in <a href="#img_ldproxy2_property_access_datatypes_default">Figure 6</a></p>
</li>
</ul>
</div>
<div id="img_ldproxy2_property_access_datatypes_onetomany_severaltables" class="imageblock text-center">
<div class="content">
<img src="./../images/ldp2_data_types_source_path_encoding_onetomany_severaltables.png" alt="ldp2 data types source path encoding onetomany severaltables">
</div>
<div class="title">Figure 5. Source path construction for value types that are data types and match <em>rule-ldp2-cls-data-types-oneToMany-severalTables</em></div>
</div>
<div id="img_ldproxy2_property_access_datatypes_default" class="imageblock text-center">
<div class="content">
<img src="./../images/ldp2_data_types_default_source_path_encoding.png" alt="ldp2 data types default source path encoding">
</div>
<div class="title">Figure 6. Default source path construction for value types that are data types</div>
</div>
<div class="paragraph">
<p>Otherwise, if the property value type is a type with identity, which are implemented as link objects, and the property does NOT match rule-ldp2-all-linkObjectAsFeatureRef, source paths are constructed as shown in <a href="#img_ldproxy2_property_access_types_with_identity_default">Figure 7</a> and <a href="#img_ldproxy2_property_access_reflexive_association_type_with_identity_default">Figure 8</a>.</p>
</div>
<div id="img_ldproxy2_property_access_types_with_identity_default" class="imageblock text-center">
<div class="content">
<img src="./../images/ldp2_types_with_identity_default_source_path_encoding.png" alt="ldp2 types with identity default source path encoding">
</div>
<div class="title">Figure 7. Default source path construction for value types that are types with identity</div>
</div>
<div id="img_ldproxy2_property_access_reflexive_association_type_with_identity_default" class="imageblock text-center">
<div class="content">
<img src="./../images/ldp2_reflexive_association_source_path_encoding.png" alt="ldp2 reflexive association source path encoding">
</div>
<div class="title">Figure 8. Default source path construction for reflexive associations for a type with identity</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The default source path construction behavior makes assumptions about the naming and structure (e.g. the columns) of associative tables in the database. If different naming or structure applies for associative tables, additional configuration (via tagged values in the model and/or configuration items [target parameters, conversion rules, map entry parameters and characteristics]) would be needed. The ldproxy target can be enhanced accordingly, if necessary.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Otherwise, if the property value type is a type with identity, which are implemented as feature references, i.e., the property DOES match rule-ldp2-all-linkObjectAsFeatureRef, source paths are constructed as shown in <a href="#img_ldproxy2_property_access_types_with_identity_feature_ref">Figure 9</a> and <a href="#img_ldproxy2_property_access_reflexive_association_type_with_identity_feature_ref">Figure 10</a>.</p>
</div>
<div id="img_ldproxy2_property_access_types_with_identity_feature_ref" class="imageblock text-center">
<div class="content">
<img src="./../images/ldp2_types_with_identity_feature_ref_source_path_encoding.png" alt="ldp2 types with identity feature ref source path encoding">
</div>
<div class="title">Figure 9. Feature reference source path construction for value types that are types with identity</div>
</div>
<div id="img_ldproxy2_property_access_reflexive_association_type_with_identity_feature_ref" class="imageblock text-center">
<div class="content">
<img src="./../images/ldp2_reflexive_association_feature_ref_source_path_encoding.png" alt="ldp2 reflexive association feature ref source path encoding">
</div>
<div class="title">Figure 10. Feature reference source path construction for reflexive associations for a type with identity</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_properties_propertytype"><a class="anchor" href="#ldproxy2_schemaconversionrules_properties_propertytype"></a>2.5.2. Property Type</h4>
<div class="paragraph">
<p>The <code>type</code> member of a property definition depends upon the value type of the property, as well as its multiplicity.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the maximum multiplicity of the property is greater than 1, and:</p>
<div class="ulist">
<ul>
<li>
<p>the value type is mapped to or implemented by a simple type, then the <code>type</code> is VALUE_ARRAY, and an additional <code>valueType</code> member is added, with the name of the simple type as value.</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: The ldproxy target does not support geometry properties with multiplicity greater than 1. Such cases should be modeled as property with max multiplicity 1 and a multi-geometry (e.g. GM_MultiPoint) or geometry collection (GM_Aggregate) as value type. If the ldproxy target encounters a geometry property with max multiplicity greater than 1, it will log an error and continue processing, assuming max multiplicity equal to 1 for the property.</p>
</li>
</ul>
</div>
</li>
<li>
<p>the value type is mapped to LINK or a type with identity, and:</p>
<div class="ulist">
<ul>
<li>
<p>the property matches <em>rule-ldp2-all-linkObjectAsFeatureRef</em>, the value type is encoded as a feature reference, the <code>type</code> is FEATURE_REF_ARRAY, and either <code>refUriTemplate</code> is added, or a <code>refType</code> with the identifier of the value type. Further details on the encoding of a FEATURE_REF are given <a href="#feature_ref">here</a>.</p>
</li>
<li>
<p>otherwise, the value type is implemented as a link object, the <code>type</code> is OBJECT_ARRAY, and a link object is created in the property definition as defined <a href="#link_object">below</a>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Otherwise, i.e. the maximum multiplicity of the property is equal to 1:</p>
<div class="ulist">
<ul>
<li>
<p>If the value type is mapped to a simple ldproxy type, then <code>type</code> is the target type defined by the map entry.</p>
</li>
<li>
<p>Otherwise, if the value type is mapped to a geometry type, then <code>type</code> is GEOMETRY and an additional <code>geometryType</code> member is added, with value as defined by the map entry (via the according characteristic of map entry parameter <em>geometryInfos</em>).</p>
</li>
<li>
<p>Otherwise, if the value type is an enumeration or code list, then <code>type</code> is STRING or a numeric type, as explained in the <a href="#ldproxy2_schemaconversionrules_types_enumeration_and_codelist">Enumeration and Code List</a> section.</p>
</li>
<li>
<p>Otherwise, if the value type is implemented as OBJECT but is not a type with identity (so most likely it is a data type), <code>type</code> simply is OBJECT.</p>
</li>
<li>
<p>Otherwise, if the value type is mapped to LINK, or a type with identity, and:</p>
<div class="ulist">
<ul>
<li>
<p>the property matches <em>rule-ldp2-all-linkObjectAsFeatureRef</em>, the value type is encoded as a feature reference, the <code>type</code> is FEATURE_REF, and either <code>refUriTemplate</code> is added, or a <code>refType</code> with the identifier of the value type. Further details on the encoding of a FEATURE_REF are given <a href="#feature_ref">here</a>.</p>
</li>
<li>
<p>otherwise, the value type is implemented as a link object, the <code>type</code> is OBJECT, and a link object is created in the property definition as defined <a href="#link_object">below</a>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div id="link_object" class="paragraph">
<p>The definition of a link object within a property definition is as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>objectType: Link</code></p>
</li>
<li>
<p><code>sourcePath</code>: As defined for the property (for details, see section <a href="#ldproxy2_schemaconversionrules_properties_sourcepaths">Source Paths</a>)</p>
</li>
<li>
<p><code>properties</code>:</p>
<div class="ulist">
<ul>
<li>
<p><code>title</code>:</p>
<div class="ulist">
<ul>
<li>
<p><code>label</code>: {value_type_name}-title</p>
</li>
<li>
<p><code>sourcePath</code>: as defined for the property (for details, see section <a href="#ldproxy2_schemaconversionrules_properties_sourcepaths">Source Paths</a>)</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: If tag <em>ldpTitleAttribute</em> on the value type has a valid value (i.e., it
contains the name of an attribute of the value type), and that attribute of the value type
is optional (i.e., it has a minimum multiplicity of 0), then: a) <code>sourcePaths</code> is used instead of <code>sourcePath</code>, and b) the name of the primary key column for (the table representing the) value type is added as another source path value - to be used as fallback in case that the title attribute on the value type has no value.</p>
</li>
<li>
<p>NOTE: If tag <em>ldpTitleAttribute</em> is defined on a supertype, and the ShapeChange workflow includes the <a href="../transformations/Flattener.html#rule-trf-cls-flatten-inheritance">Flattener for transforming inheritance</a>, then the workflow should also include the <a href="../transformations/Tagged_Value_Transformer.html">tagged value transformer</a>, with <a href="../transformations/Tagged_Value_Transformer.html#rule-trf-taggedValue-inheritance">rule-trf-taggedValue-inheritance</a> to ensure that tag <em>ldpTitleAttribute</em> is copied to all subtypes - before inheritance hierarchies are flattened. That will ensure that the ldproxy target can find the tag on all subtypes, even though inheritance hierarchies have been flattened.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>type</code>: STRING</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>href</code>:</p>
<div class="ulist">
<ul>
<li>
<p><code>label</code>: {value_type_name}-ID</p>
</li>
<li>
<p><code>sourcePath</code>: as defined for the property (for details, see section <a href="#ldproxy2_schemaconversionrules_properties_sourcepaths">Source Paths</a>)</p>
</li>
<li>
<p><code>type</code>: STRING</p>
</li>
<li>
<p><code>transformations</code>:</p>
<div class="ulist">
<ul>
<li>
<p><code>stringFormat</code>: Either the URL template from the map entry, if one is defined for the property value type, or '{{serviceUrl}}/collections/{value_type_name}/items/{{value}}', where value_type_name is the name of the value type (formatted according to target parameter <a href="#collectionIdFormat">[collectionIdFormat]</a>) (and {{serviceUrl}} as well as {{value}} will automatically be replaced by ldproxy).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div id="feature_ref" class="paragraph">
<p>The definition of a FEATURE_REF within a property definition is as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If only a single source path was determined: <code>sourcePath</code>, as defined for
the property (for details,
see section <a href="#ldproxy2_schemaconversionrules_properties_sourcepaths">Source Paths</a>)</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: If a specific title is defined for the value type, then the source path
is for the actual value of the FEATURE_REF. Otherwise, it is the identifier of the
referenced feature (which can be a foreign key column).</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>type: FEATURE_REF</code>, if the maximum multiplicity of the property is 1,
otherwise <code>type: FEATURE_REF_ARRAY</code></p>
</li>
<li>
<p>If the value type is mapped to LINK: <code>refUriTemplate</code> is added,
with the template value being determined like the stringFormat-transformation
of a <a href="#link_object">link object href-member</a>.</p>
</li>
<li>
<p>Otherwise, i.e., the value type is NOT mapped to LINK, it depends:</p>
<div class="ulist">
<ul>
<li>
<p>If a single source path was determined for the FEATURE_REF:</p>
<div class="ulist">
<ul>
<li>
<p><code>refType</code> is added, with the identifier of the value type as value.</p>
</li>
<li>
<p>If tag <em>ldpTitleAttribute</em> on the value type has a valid value (i.e., it
contains the name of an attribute of the value type), then <code>properties</code> with two members
is added:</p>
<div class="ulist">
<ul>
<li>
<p>Member <code>id</code>, with:</p>
<div class="ulist">
<ul>
<li>
<p><code>sourcePath</code>: path for the ID member of the value type</p>
</li>
<li>
<p><code>type</code>: ldproxy type which corresponds to the type of the identifier</p>
</li>
</ul>
</div>
</li>
<li>
<p>Member <code>title</code>:</p>
<div class="ulist">
<ul>
<li>
<p><code>sourcePath</code>: path for the title attribute of the value type</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: If tag <em>ldpTitleAttribute</em> on the value type has a valid value (i.e., it
contains the name of an attribute of the value type), and that attribute of the value type
is optional (i.e., it has a minimum multiplicity of 0), then:
a) <code>sourcePaths</code> is used instead of <code>sourcePath</code>, and
b) the name of the primary key column for (the table representing the)
value type is added as another source path value - to be used as
fallback in case that the title attribute on the value type has no value.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>type</code>: ldproxy type which corresponds to the type of the title attribute.</p>
</li>
<li>
<p><code>label</code>: {value type name} + "-title"</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Otherwise, i.e., we have a single source path and tag <em>ldpTitleAttribute</em>
on the value type does NOT have a valid value:</p>
<div class="ulist">
<ul>
<li>
<p><code>valueType</code> is added, with the ldproxy type of the ID member in the value type definition.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Otherwise, i.e., multiple source paths were determined for the FEATURE_REF:</p>
<div class="ulist">
<ul>
<li>
<p>If the source paths all have the same value - which can happen
in cases where features are stored in the same place, and an additional type
discriminator field exists in the data store - like in
the <a href="#ldproxy2_schemaconversionrules_specificrules_coretable">Coretable Approach</a>, or if tag <em>ldpTypeAttribute</em>
on the the value type has a valid value:</p>
<div class="ulist">
<ul>
<li>
<p><code>properties</code> with a <code>type</code> member is added:</p>
<div class="ulist">
<ul>
<li>
<p>The <code>sourcePath</code> of that <code>type</code> member is the path to the type discriminator field.</p>
</li>
<li>
<p>Another <code>type</code> member defines the type of the discriminator value (typically STRING).</p>
</li>
<li>
<p>An enum constraint is added, with one value per relevant type identifier.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If tag <em>ldpTitleAttribute</em> on the value type has a valid value, <code>id</code> and <code>title</code>
members are also encoded within the <code>properties</code> member, as described before.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Otherwise, i.e. multiple source paths with different value were determined:</p>
<div class="ulist">
<ul>
<li>
<p><code>concat</code> or <code>coalesce</code> is used to encode the individual source
path options. The former is used if the maximum multiplicity of
the property is greater than one, the latter if it is equal to one.
An example is shown in section
<a href="#ldproxy2_schemaconversionrules_types_inheritance_and_specialization">Inheritance and Specialization</a>.</p>
</li>
<li>
<p>Per case within <code>concat</code> or <code>coalesce</code>:</p>
<div class="ulist">
<ul>
<li>
<p><code>sourcePath</code>: One of the source path values.</p>
</li>
<li>
<p><code>refType</code> is added, with value being the identifier of the actual
(value) type that is targeted by the source path.</p>
</li>
<li>
<p>If tag <em>ldpTitleAttribute</em> on the value type has a valid value, <code>id</code> and <code>title</code>
members are encoded within a <code>properties</code> member, as described before.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <em>inlineOrByReference</em> tagged value of the property is ignored by the ldproxy target.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_properties_multiplicity_voidable"><a class="anchor" href="#ldproxy2_schemaconversionrules_properties_multiplicity_voidable"></a>2.5.3. Multiplicity and Voidable</h4>
<div class="paragraph">
<p>The behavior for encoding the <code>type</code> member of a property definition in a provider type configuration, depending on the maximum multiplicity of the property, is already defined in the <a href="#ldproxy2_schemaconversionrules_properties_propertytype">Property Type</a> section.</p>
</div>
<div class="paragraph">
<p>Additional constraints may be added to the provider configuration, based upon the multiplicity and voidability of the property:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Constraint <code>required</code> is added, with value true, unless the minimum multiplicity of the property is 0 or the property is voidable.</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: A voidable property is a UML property with stereotype &lt;&lt;voidable&gt;&gt;, or with tagged value <em>nillable</em> = true.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If the maximum multiplicity of the property is greater than 1:</p>
<div class="ulist">
<ul>
<li>
<p>Constraint <code>minOccurrence</code> is added, with value being the minimum multiplicity defined for the property. However, if the property is voidable, then the value is set to 0.</p>
</li>
<li>
<p>Constraint <code>maxOccurrence</code> is added, with value being the maximum multiplicity defined for the property. However, the constraint will not be added if the maximum multiplicity is '*'.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_properties_readonly"><a class="anchor" href="#ldproxy2_schemaconversionrules_properties_readonly"></a>2.5.4. readOnly</h4>
<div class="paragraph">
<p>With <em>rule-ldp2-prop-readOnly</em>, the ldproxy representation of a UML property that is read-only will include the initial value (if set) within the <code>constantValue</code> member. The <code>constantValue</code> member then replaces the <code>sourcePath</code> in the property definition.</p>
</div>
</div>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_properties_initialvalue"><a class="anchor" href="#ldproxy2_schemaconversionrules_properties_initialvalue"></a>2.5.5. Initial Value</h4>
<div class="paragraph">
<p>Initial values are only relevant for 'normal' attributes (i.e. attributes that do not represent enums or codes), in combination with readOnly (for further details, see the <a href="#ldproxy2_schemaconversionrules_properties_readonly">readOnly</a> section). ldproxy does not (yet) have any specific configuration item to represent initial values of 'normal' attributes that are not readOnly.</p>
</div>
</div>
<div class="sect3">
<h4 id="ldproxy2_Unit_of_Measure"><a class="anchor" href="#ldproxy2_Unit_of_Measure"></a>2.5.6. Unit of Measure</h4>
<div class="paragraph">
<p>If target parameter <em>uomTaggedValueName</em> (without default value) is set, the target looks for a tagged value
with that name on each property whose value type maps to the ldproxy FLOAT or INTEGER type. If the tag
exists and has a non-blank value, the member <code>unit</code> is added to the property definition in the provider
configuration, with the tag value as value.</p>
</div>
</div>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_properties_serviceconfig"><a class="anchor" href="#ldproxy2_schemaconversionrules_properties_serviceconfig"></a>2.5.7. Additional Service Configuration Items</h4>
<div class="paragraph">
<p>This section documents how additional items may be defined in the service configuration, based upon conversion of a UML property.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Currently, the only items covered are transformations within the Features HTML API-Module. In the future, additional API-Modules can be covered as well.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="ldproxy2_schemaconversionrules_properties_serviceconfig_featureshtml_transformations"><a class="anchor" href="#ldproxy2_schemaconversionrules_properties_serviceconfig_featureshtml_transformations"></a>2.5.7.1. Features HTML API-Module, Property Transformations</h5>
<div class="paragraph">
<p>The service configuration contains a collection definition of the global type in which a UML property is encoded. Within the API building block FEATURES_HTML, member <code>transformations</code> exists. If one or more of the following conditions are met by the UML property, an additional member is created in the <code>transformations</code> object value. The name of the new member is the '.'-concatenated path to the property within the type definition. The value of the new member is an object, which will contain one or more members that define the transformations to execute for this property.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the property has tag <em>ldpRemove</em> with value IN_COLLECTION, ALWAYS or NEVER, then a <code>remove</code> member is added, with the tagged value as value.</p>
</li>
<li>
<p>If the property value type is mapped to DATE, and the <em>dateFormat</em> target parameter (without default value) has a non-blank value, then a <code>dateFormat</code> member is added, with the parameter value as value.</p>
</li>
<li>
<p>If the property value type is mapped to DATETIME, and the <em>dateTimeFormat</em> target parameter (without default value) has a non-blank value, then a <code>dateFormat</code> member is added, with the parameter value as value.</p>
</li>
</ul>
</div>
<div id="example_ldproxy2_schemaconversionrules_properties_serviceconfig_featureshtml_transformations" class="listingblock">
<div class="title">Listing 2. Addition of transformations for a property in the service configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="YAML"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre><span class="key">collections</span>:
  <span class="key">classxyz</span>:
    <span class="key">api</span>:
    - <span class="string"><span class="content">buildingBlock: FEATURES_HTML</span></span>
      <span class="key">transformations</span>:
        <span class="key">propertya.propertyb.propertyc</span>:
          <span class="key">remove</span>: <span class="string"><span class="content">IN_COLLECTION</span></span>
        <span class="key">propertyd</span>:
          <span class="key">dateFormat</span>: <span class="string"><span class="content">dd.MM.yyyy</span></span></pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ldproxy2_schemaconversionrules_associationclass"><a class="anchor" href="#ldproxy2_schemaconversionrules_associationclass"></a>2.6. Association Class</h3>
<div class="paragraph">
<p>There is no native representation for association classes in ldproxy. For schemas that include association classes, a transformation of association classes as defined by GML 3.3 and implemented by the <a href="../transformations/Association_Class_Mapper.html">ShapeChange Association Class Mapper</a> should be used.</p>
</div>
</div>
<div class="sect2">
<h3 id="ldproxy2_schemaconversionrules_constraint"><a class="anchor" href="#ldproxy2_schemaconversionrules_constraint"></a>2.7. Constraints</h3>
<div class="paragraph">
<p>OCL constraints can be used to enrich a conceptual model with requirements that cannot be expressed in UML alone. The ldproxy target does not support conversion of these constraints.</p>
</div>
</div>
<div class="sect2">
<h3 id="ldproxy2_schemaconversionrules_additionalrules"><a class="anchor" href="#ldproxy2_schemaconversionrules_additionalrules"></a>2.8. Additional rules</h3>
<div class="paragraph">
<p>If <em>rule-ldp2-all-notEncoded</em> applies to an element of the application schema, then that element and all its components are not encoded.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
How to define the encoding rule that applies to an application schema element is documented in more detail <a href="#applying_specific_encoding_rule_to_model_element">here</a>. The <a href="https://shapechange.net/resources/config/StandardRules.xml">ShapeChange configuration file StandardRules.xml</a> defines an encoding rule named "notEncoded", which includes <em>rule-ldp2-all-notEncoded</em>. When StandardRules.xml is included in the configuration of the ldproxy target (typically using an xinclude XML element), then by setting tagged value <em>ldp2EncodingRule</em> to "notEncoded", one would achieve that that model element is not encoded in the ldproxy configuration files.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If a property is encountered whose value type is not encoded (<em>rule-ldp2-all-notEncoded</em> applies to the value type), the ldproxy target will log an error and ignore the property.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ldproxy2_schemaconversionrules_specificrules"><a class="anchor" href="#ldproxy2_schemaconversionrules_specificrules"></a>2.9. Specific rules</h3>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_specificrules_genericvaluetypes"><a class="anchor" href="#ldproxy2_schemaconversionrules_specificrules_genericvaluetypes"></a>2.9.1. Conversion of generic value types</h4>
<div class="paragraph">
<p>(since v2.14.0)</p>
</div>
<div class="paragraph">
<p>Some domains use constructs like the one shown in
<a href="#img_ldproxy2_specific_rules_generic_value_types">Figure 11</a>
to add extension points to their feature types. The generic attributes
shown in this example contain a name and a (simple) value. They provide
a specific place for adding further information in a key-value-pair based fashion.</p>
</div>
<div id="img_ldproxy2_specific_rules_generic_value_types" class="imageblock text-center">
<div class="content">
<img src="./../images/ldp2_specificrules_genericvaluetypes.png" alt="ldp2 specificrules genericvaluetypes">
</div>
<div class="title">Figure 11. Example schema with generic value types</div>
</div>
<div class="paragraph">
<p>There is a specific solution for supporting such structures with ldproxy.</p>
</div>
<div class="paragraph">
<p>The according conversion is enabled using <em>rule-ldp2-cls-genericValueType</em>.
The conversion rule is applied for a &lt;&lt;dataType&gt;&gt; whose name is contained in the
(comma-separated) value of target parameter <em>genericValueTypes</em>. The subtypes will
automatically be taken into account (so do not list them in the parameter value).
For the example, <code>genericValueTypes=GenerAttribute</code> would thus suffice.</p>
</div>
<div class="paragraph">
<p>The provider configuration for FT4 would contain the definitions listed in
<a href="#example_ldproxy2_specific_rules_generic_value_types_provider">Listing 3</a>.</p>
</div>
<div id="example_ldproxy2_specific_rules_generic_value_types_provider" class="listingblock">
<div class="title">Listing 3. Generic value type encoding in the provider configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="YAML"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
</pre></td>
  <td class="code"><pre>  <span class="key">someGenerAttribute</span>:
    <span class="key">type</span>: <span class="string"><span class="content">OBJECT</span></span>
    <span class="key">objectType</span>: <span class="string"><span class="content">GenerAttribute</span></span>
    <span class="key">label</span>: <span class="string"><span class="content">GenerAttribute</span></span>
    <span class="key">description</span>: <span class="string"><span class="content">The description of type GenerAttribute.</span></span>
    <span class="key">properties</span>:
      <span class="key">name</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="content">name</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">STRING</span></span>
        <span class="key">label</span>: <span class="string"><span class="content">name</span></span>
        <span class="key">description</span>: <span class="string"><span class="content">Description of attribute 'name'.</span></span>
        <span class="key">constraints</span>:
          <span class="key">required</span>: <span class="string"><span class="content">true</span></span>
      <span class="key">dataType</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="content">datatype</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">STRING</span></span>
        <span class="key">label</span>: <span class="string"><span class="content">data type</span></span>
        <span class="key">constraints</span>:
          <span class="key">required</span>: <span class="string"><span class="content">true</span></span>
          <span class="key">enum</span>:
          - <span class="string"><span class="content">IntegerAttribute</span></span>
          - <span class="string"><span class="content">DoubleAttribute</span></span>
          - <span class="string"><span class="content">StringAttribute</span></span>
          - <span class="string"><span class="content">DateAttribute</span></span>
          - <span class="string"><span class="content">UrlAttribute</span></span>
      <span class="key">value</span>:
        <span class="key">type</span>: <span class="string"><span class="content">VALUE</span></span>
        <span class="key">label</span>: <span class="string"><span class="content">value</span></span>
        <span class="key">coalesce</span>:
        - <span class="string"><span class="content">sourcePath: value_integer</span></span>
          <span class="key">type</span>: <span class="string"><span class="content">INTEGER</span></span>
        - <span class="string"><span class="content">sourcePath: value_double</span></span>
          <span class="key">type</span>: <span class="string"><span class="content">FLOAT</span></span>
        - <span class="string"><span class="content">sourcePath: value_string</span></span>
          <span class="key">type</span>: <span class="string"><span class="content">STRING</span></span>
        - <span class="string"><span class="content">sourcePath: value_date</span></span>
          <span class="key">type</span>: <span class="string"><span class="content">DATE</span></span>
        - <span class="string"><span class="content">sourcePath: value_uri</span></span>
          <span class="key">type</span>: <span class="string"><span class="content">STRING</span></span>
  <span class="key">otherGenerAttribute</span>:
    <span class="key">type</span>: <span class="string"><span class="content">OBJECT_ARRAY</span></span>
    <span class="key">objectType</span>: <span class="string"><span class="content">GenerAttribute</span></span>
    <span class="key">label</span>: <span class="string"><span class="content">GenerAttribute</span></span>
    <span class="key">description</span>: <span class="string"><span class="content">The description of type GenerAttribute.</span></span>
    <span class="key">properties</span>:
      <span class="key">name</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="content">name</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">STRING</span></span>
        <span class="key">label</span>: <span class="string"><span class="content">name</span></span>
        <span class="key">description</span>: <span class="string"><span class="content">Description of attribute 'name'.</span></span>
        <span class="key">constraints</span>:
          <span class="key">required</span>: <span class="string"><span class="content">true</span></span>
      <span class="key">dataType</span>:
        <span class="key">sourcePath</span>: <span class="string"><span class="content">datatype</span></span>
        <span class="key">type</span>: <span class="string"><span class="content">STRING</span></span>
        <span class="key">label</span>: <span class="string"><span class="content">data type</span></span>
        <span class="key">constraints</span>:
          <span class="key">required</span>: <span class="string"><span class="content">true</span></span>
          <span class="key">enum</span>:
          - <span class="string"><span class="content">IntegerAttribute</span></span>
          - <span class="string"><span class="content">DoubleAttribute</span></span>
          - <span class="string"><span class="content">StringAttribute</span></span>
          - <span class="string"><span class="content">DateAttribute</span></span>
          - <span class="string"><span class="content">UrlAttribute</span></span>
      <span class="key">value</span>:
        <span class="key">type</span>: <span class="string"><span class="content">VALUE</span></span>
        <span class="key">label</span>: <span class="string"><span class="content">value</span></span>
        <span class="key">coalesce</span>:
        - <span class="string"><span class="content">sourcePath: value_IntegerAttribute</span></span>
          <span class="key">type</span>: <span class="string"><span class="content">INTEGER</span></span>
        - <span class="string"><span class="content">sourcePath: value_double</span></span>
          <span class="key">type</span>: <span class="string"><span class="content">FLOAT</span></span>
        - <span class="string"><span class="content">sourcePath: value_string</span></span>
          <span class="key">type</span>: <span class="string"><span class="content">STRING</span></span>
        - <span class="string"><span class="content">sourcePath: value_DateAttribute</span></span>
          <span class="key">type</span>: <span class="string"><span class="content">DATE</span></span>
        - <span class="string"><span class="content">sourcePath: value_UrlAttribute</span></span>
          <span class="key">type</span>: <span class="string"><span class="content">STRING</span></span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>sourcePath</code> values within value.coalesce are constructed using the template
<code>{attribute name} + "_" + {suffix}</code> - where the suffix default is the name of the attribute
value type. That default can be overwritten by setting tagged value
<em>ldpGenericValueTypeSuffix</em> on the attribute. In the example, that is the case for
the attributes StringAttribute.value as well as DoubleAttribute.value.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If fragments are enabled (target parameter <code>enableFragments = true</code>), a single
fragment definition for GenerAttribute would be created, and referenced in the
definitions of someGenerAttribute and otherGenerAttribute.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>sourcePath</code> for someGenerAttribute and otherGenerAttribute is not shown in
<a href="#example_ldproxy2_specific_rules_generic_value_types_provider">Listing 3</a>. The path would
be constructed as usual for any data type valued property. For further details,
see <a href="#ldproxy2_schemaconversionrules_properties_sourcepaths">Source Paths</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<em>rule-ldp2-cls-genericValueType</em> only looks for a single attribute that
is common to all subtypes of the classes identified by target
parameter <em>genericValueTypes</em>. Additional properties of these subtypes are ignored!
Also, if multiple common properties exist, all will be ignored (and an error logged)!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The primary purpose of the <code>dataType</code> property is to support compliant GML output.
The enumeration is constructed with the names of the subtypes of the generic value
type.
If building block <a href="#ldproxy2_building_block_features_gml">Features - GML</a> is enabled,
then the service configuration
would declare <code>variableObjectElementNames</code> (one per generic value type)
for building block GML, as shown in the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="YAML"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td>
  <td class="code"><pre>- <span class="string"><span class="content">buildingBlock: GML</span></span>
  <span class="key">enabled</span>: <span class="string"><span class="content">true</span></span>
  <span class="key">variableObjectElementNames</span>:
    <span class="key">GenerAttribute</span>:
      <span class="key">property</span>: <span class="string"><span class="content">dataType</span></span>
      <span class="key">mapping</span>:
        <span class="key">IntegerAttribute</span>: <span class="string"><span class="content">ns:IntegerAttribute</span></span>
        <span class="key">DoubleAttribute</span>: <span class="string"><span class="content">ns:DoubleAttribute</span></span>
        <span class="key">StringAttribute</span>: <span class="string"><span class="content">ns:StringAttribute</span></span>
        <span class="key">DateAttribute</span>: <span class="string"><span class="content">ns:DateAttribute</span></span>
        <span class="key">UrlAttribute</span>: <span class="string"><span class="content">ns:UrlAttribute</span></span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The namespace prefixes in the mappings are automatically determined by ShapeChange.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Furthermore, in the <a href="#ldproxy2_building_block_features_geojson">Features - GeoJSON</a> and
<a href="#ldproxy2_building_block_features_jsonfg">Features - JSON-FG</a> building blocks, if enabled,
a transformation is added to remove property <code>dataType</code> from the according output. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="YAML"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td>
  <td class="code"><pre>  <span class="key">ft4</span>:
    <span class="key">id</span>: <span class="string"><span class="content">ft4</span></span>
    <span class="key">label</span>: <span class="string"><span class="content">ft4</span></span>
    <span class="key">enabled</span>: <span class="string"><span class="content">true</span></span>
    <span class="key">api</span>:
    - <span class="string"><span class="content">buildingBlock: GEO_JSON</span></span>
      <span class="key">transformations</span>:
        <span class="key">otherGenerAttribute.dataType</span>:
        - <span class="string"><span class="content">remove: ALWAYS</span></span>
        <span class="key">someGenerAttribute.dataType</span>:
        - <span class="string"><span class="content">remove: ALWAYS</span></span>
    - <span class="string"><span class="content">buildingBlock: JSON_FG</span></span>
      <span class="key">transformations</span>:
        <span class="key">otherGenerAttribute.dataType</span>:
        - <span class="string"><span class="content">remove: ALWAYS</span></span>
        <span class="key">someGenerAttribute.dataType</span>:
        - <span class="string"><span class="content">remove: ALWAYS</span></span></pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ldproxy2_schemaconversionrules_specificrules_coretable"><a class="anchor" href="#ldproxy2_schemaconversionrules_specificrules_coretable"></a>2.9.2. Coretable Approach</h4>
<div class="paragraph">
<p>(since v2.14.0)</p>
</div>
<div class="paragraph">
<p>Application schemas can be quite extensive, and can have classes with
quite complex structure. Managing data for that schema in a relational database
can be a daunting and demanding task - especially if the database schema
is also complex (lots of tables, lots of columns, lots of foreign key and
other constraints). Furthermore, changes in the application schema structure,
during application schema development, or between application schema versions,
require complex database updates. The <em>coretable approach</em> is a way to mitigate the level
of complexity. In this approach, the database schema only consists of two tables:
a coretable with one entry per object (each object MUST have a globally unique identifier),
and a separate references table, where the object references are managed.</p>
</div>
<div class="paragraph">
<p>To signal that the coretable approach applies, include
<em>rule-ldp2-all-coretable</em> in the encoding rule.</p>
</div>
<div class="paragraph">
<p>The coretable is defined as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The table name is given by target parameter <em>coretable</em> (default value is 'features').</p>
</li>
<li>
<p>The table must have a separate primary key column (integer valued). The column
name is given by target parameter <em>coretablePkColumn</em> (default value is 'pk').</p>
</li>
<li>
<p>The table has a column with the object identifiers. The identifiers are used
in object references, and must be unique (at least within the coretable; UUIDs would be
suitable, for example). The column name is given by target parameter <em>coretableIdColumn</em>
(default value is the value of target parameter <em>primaryKeyColumn</em>). The ldproxy type
of the column is defined via target parameter <em>coretableIdColumnLdproxyType</em> (default
is 'INTEGER').</p>
</li>
<li>
<p>The table also has a column in which the name of the feature type of an object is
encoded. The name is equal to the ldproxy collection ID for that feature type.
The column name is defined via
target parameter <em>coretableFeatureTypeColumn</em> (default value is 'featuretype').</p>
</li>
<li>
<p>The table must have a <code>properties</code> column with JSON-encoded value. This column
is used to encode all object properties, including object references from data types, but
typically not object references from or between types with identity.</p>
<div class="ulist">
<ul>
<li>
<p>If a data type is encoded, then any object reference it may have is encoded within
the JSON properties as well - NOT in the high priority reference column of the coretable
or within the references table. The encoding follows the rules for FEATURE_REFs laid out
<a href="#feature_ref">here</a>. However, the source path is just the name of the property that
represents the object reference.</p>
<div class="ulist">
<ul>
<li>
<p>NOTE: This encoding does NOT take into account all possibilities of the JSON encoding
with <a href="./JSON_Schema.html#rule-json-all-featureRefs">rule-json-all-featureRefs</a>,
JSON Schema target parameters <code>featureRelProfiles=rel-as-key`</code>, and (potentially also)
<code>featureRefWithAnyCollectionId=true</code>. The source path would need to be followed by <code>/featureId</code>
if either multiple collections are targeted by the property value type (i.e., the
value type is a supertype, with multiple non-abstract types in the subtype hierarchy),
or some target parameter that reflected the JSON Schema target parameter
<em>featureRefWithAnyCollectionId</em> was set to true. The encoding of <code>/featureId</code> may be
added in a future version of the ldproxy target.</p>
</li>
</ul>
</div>
</li>
<li>
<p>NOTE: The JSON object does not have an additional
level of nesting, like in the case of a GeoJSON-encoded feature. The object properties
are directly encoded as members of the JSON object (data type values would of course
lead to some level of nesting).</p>
</li>
</ul>
</div>
</li>
<li>
<p>The table has a column to store the
<a href="#ldproxy2_schemaconversionrules_types_primarygeometry">primary geometry</a> of the object.
The column name is given by target parameter <em>coretableGeometryColumn</em> (default value
is 'geom').</p>
</li>
<li>
<p>The table may have additional columns (for example, to identify the application schema version),
which will be ignored by ldproxy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The references table is defined as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The table name is given by target parameter <em>coretableRelationsTable</em>
(default value is 'references').</p>
</li>
<li>
<p>The table must have a separate primary key column, whose name
is given by target parameter <em>coretablePkColumn</em> (like in the coretable itself, see above).</p>
</li>
<li>
<p>The table has two columns with the identifiers of the objects that participate
in an object-object relationship. The object-object relationship is typically
modeled as an association. For a uni-directional association, the direction
of the association is unimportant. The owner of the navigable association role
automatically is identified as the source of the relationship, and the association role
automatically is seen as the target role. However, for a bi-directional
association, the direction in which the association was modeled does matter,
because source and target must be encoded in separate and distinct columns within the references table.
In the bi-directional case, the class that is the source of the association is the source
of the relationship, and the other class is the target. The association role that is navigable
from the source is the target role, and the other association role is the source role.</p>
<div class="ulist">
<ul>
<li>
<p>The column that contains the identifier of the source object is defined by target parameter
<em>coretableIdColumn</em> (like in the coretable itself, see above).</p>
</li>
<li>
<p>The column that contains the identifier of the target object is defined by target parameter
<em>coretableRefColumn</em> (default value is 'ref').</p>
</li>
<li>
<p>The ldproxy type of both columns is defined by target parameter <em>coretableIdColumnLdproxyType</em>
(like in the coretable itself, see above).</p>
</li>
</ul>
</div>
</li>
<li>
<p>The references table also has two columns in which the names of the
target and the source roles are encoded (for a uni-directional association,
only the target role name is provided):</p>
<div class="ulist">
<ul>
<li>
<p>The name of the column with the target role is defined by target parameter
<em>coretableRelationNameColumn</em> (default value is 'rel').</p>
</li>
<li>
<p>The name of the column with the source role is defined by target parameter
<em>coretableInverseRelationNameColumn</em> (default value is 'rel_inv').</p>
</li>
<li>
<p>The ldproxy type of both columns is 'STRING'.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The ldproxy target will create appropriate configurations for this particular database schema.</p>
</div>
<div class="paragraph">
<p>The coretable approach supports object references whose sources are data types.
However, such references MUST be encoded within the JSON-properties. They cannot be
represented in the references table.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ldproxy2_encodingrules"><a class="anchor" href="#ldproxy2_encodingrules"></a>3. Encoding Rules</h2>
<div class="sectionbody">
<div id="applying_specific_encoding_rule_to_model_element" class="paragraph">
<p>For some application schemas, it is useful to know that different encoding rules can be applied to the subpackages, classes, and properties defined by the schema. Typically, a single encoding rule applies to all application schema elements. In ShapeChange, that rule is identified by setting the target parameter <em>defaultEncodingRule</em>, with the unique name defined for the encoding rule in the target configuration. The target configuration, however, can contain multiple encoding rules (with different names). By setting tagged value <em>ldp2EncodingRule</em> on an application schema element, using the name of another encoding rule, the model element will be encoded as defined by that rule.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-11-28 15:25:10 +0100
</div>
</div>
</body>
</html>